---
title: Docusaurus 2.4
authors: [slorber]
tags: [release]
image: ./img/social-card.png
date: 2023-03-23
---

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ **Docusaurus 2.4** æ­£å¼å‘å¸ƒã€‚

å‡çº§è¿‡ç¨‹åº”è¯¥å¾ˆç®€å•ï¼šæ­£å¦‚æˆ‘ä»¬çš„[å‘å¸ƒæµç¨‹æ–‡æ¡£](/community/release-process)æ‰€è¿°ï¼Œæ¬¡è¦ç‰ˆæœ¬éµå¾ª[è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶](https://semver.org/)è§„èŒƒã€‚

![Docusaurus åšå®¢æ–‡ç« ç¤¾äº¤åª’ä½“å¡ç‰‡](./img/social-card.png)

<!--truncate-->

import BrowserWindow from '@site/src/components/BrowserWindow';
import IframeWindow from '@site/src/components/BrowserWindow/IframeWindow';
import ErrorBoundaryTestButton from '@site/src/components/ErrorBoundaryTestButton';

## é‡ç‚¹æ›´æ–°

### ä¾§è¾¹æ é¡¹ç›®æè¿°

åœ¨ [#8236](https://github.com/facebook/docusaurus/pull/8236) ä¸­ï¼Œæˆ‘ä»¬ä¸ºæ–‡æ¡£ä¾§è¾¹æ ä¸­ç±»å‹ä¸º `link` å’Œ `category` çš„é¡¹ç›®æ–°å¢äº† `description` å±æ€§æ”¯æŒã€‚

```tsx title="sidebars.js"
[
  {
    type: 'link',
    label: 'Link with description',
    href: 'https://docusaurus.io',
    // highlight-next-line
    description: 'Some link description',
  },
  {
    type: 'category',
    label: 'Category with description',
    // highlight-next-line
    description: 'Some category description',
    items: [],
  },
];
```

è¿™äº›æè¿°å°†ç”¨äºåˆ†ç±»ç”Ÿæˆçš„ç´¢å¼•é¡µé¢ã€‚

![å±•ç¤ºå¸¦æœ‰è‡ªå®šä¹‰æè¿°çš„ä¾§è¾¹æ åˆ†ç±»ç”Ÿæˆç´¢å¼•é¡µé¢](./img/sidebar-item-description.jpg)

### ä¸»é¢˜æŸ¥è¯¢å‚æ•°

åœ¨ [#8708](https://github.com/facebook/docusaurus/pull/8708) ä¸­ï¼Œæˆ‘ä»¬æ–°å¢äº†é€šè¿‡ `docusaurus-theme` æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°å¼ºåˆ¶ Docusaurus ä»¥ `light` æˆ– `dark` æ¨¡å¼åˆå§‹åŒ–çš„åŠŸèƒ½ã€‚

è¿™å¯¹äºåœ¨ iframe æˆ– WebView ä¸­åµŒå…¥ç°æœ‰ Docusaurus é¡µé¢æ—¶ç¡®ä¿ä¸»é¢˜ä¸€è‡´æ€§éå¸¸æœ‰ç”¨ã€‚

<IframeWindow url="/docs/?docusaurus-theme=light" />

<IframeWindow url="/docs/?docusaurus-theme=dark" />

### Remark æ’ä»¶ npm2yarn å‡çº§

åœ¨ [#8690](https://github.com/facebook/docusaurus/pull/8690) ä¸­ï¼Œæˆ‘ä»¬å‡çº§äº† Remark æ’ä»¶ [@docusaurus/remark-plugin-npm2yarn](https://github.com/facebook/docusaurus/tree/main/packages/docusaurus-remark-plugin-npm2yarn)ï¼Œä¿®å¤äº†å¤šä¸ªè½¬æ¢é”™è¯¯ï¼Œæ–°å¢äº†å¯¹ pnpm çš„ä¸€æµæ”¯æŒï¼Œå¹¶æ”¯æŒæ³¨å†Œè‡ªå®šä¹‰è½¬æ¢å™¨ä»¥ç”Ÿæˆæ–°æ ‡ç­¾é¡µã€‚

````markdown
Run these commands!

```bash npm2yarn
npm install
npm run build
npm run myCustomScript -- --some-arg
```
````

<BrowserWindow>

```bash npm2yarn
npm install
npm run build
npm run myCustomScript -- --some-arg
```

</BrowserWindow>

### æ”¯æŒå¤šè·Ÿè¸ª ID çš„ gtag

åœ¨ [#8620](https://github.com/facebook/docusaurus/pull/8620) ä¸­ï¼Œæˆ‘ä»¬ä¸º [@docusaurus/plugin-google-gtag](/docs/api/plugins/@docusaurus/plugin-google-gtag) æ’ä»¶æ–°å¢äº†å£°æ˜å¤šä¸ªè·Ÿè¸ª ID çš„æ”¯æŒã€‚

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        gtag: {
          trackingID: [
            // highlight-next-line
            'G-<YOUR-NEW-GA4-ID>',
            // highlight-next-line
            'UA-<YOUR-OLD-UA-ID>',
          ],
        },
      },
    ],
  ],
};
```

:::warning[Google å³å°†åœæ­¢ Universal Analytics æœåŠ¡]

**[Google å°†äº 2023 å¹´ 7 æœˆ 1 æ—¥åœæ­¢å…¶ Universal Analytics æœåŠ¡](https://blog.google/products/marketingplatform/analytics/prepare-for-future-with-google-analytics-4/)**ã€‚

Docusaurus ç”¨æˆ·åº”è¿ç§»è‡³ Google Analytics 4ã€‚Google **ä¸å…è®¸å°†ç°æœ‰ Universal Analytics æ•°æ®è¿ç§»**åˆ°æ–°çš„ Google Analytics 4 å±æ€§ã€‚

ä¸ºä¿æŒåˆ†ææ•°æ®çš„è¿ç»­æ€§ï¼Œæˆ‘ä»¬æš‚æ—¶å»ºè®®æ‚¨åŒæ—¶å‘ä¸¤ä¸ªè·Ÿè¸ª ID æŠ¥å‘Šäº‹ä»¶ï¼šæ—§ IDï¼ˆ`UA-*`ï¼‰å’Œæ–° IDï¼ˆ`G-*`ï¼‰ã€‚è¯¦æƒ…è¯·å‚é˜…**[ä¸“å±é—®é¢˜](https://github.com/facebook/docusaurus/issues/7221)**ã€‚

:::

### å¼€å‘è€…ä½“éªŒ

åœ¨ [#8736](https://github.com/facebook/docusaurus/pull/8736) ä¸­ï¼Œæˆ‘ä»¬æ”¹è¿›äº†é”™è¯¯ä¿¡æ¯çš„å‘ˆç°æ–¹å¼ï¼Œå¹¶æ–°å¢äº†å¯¹æ˜¾ç¤ºå®Œæ•´é”™è¯¯å› æœé“¾çš„åˆæ­¥æ”¯æŒï¼ˆå‚è§ [ES2022 é”™è¯¯åŸå› ](https://h3manth.com/ES2022/#error-cause)ï¼‰ã€‚

:::tip

ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹å®é™…æ•ˆæœï¼š<ErrorBoundaryTestButton cause="å¯èƒ½æ˜¯æœªå®šä¹‰ä¸æ˜¯ä¸€ä¸ªå‡½æ•° ğŸ˜„"/>

:::

åœ¨ [#8735](https://github.com/facebook/docusaurus/pull/8735) ä¸­ï¼Œæˆ‘ä»¬è¿˜ä½¿å¯¼èˆªæ ç›¸å…³é”™è¯¯ä¿¡æ¯æ›´åŠ æ¸…æ™°ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å‡ºé”™åŸå› ã€‚

![Docusaurus å¯¼èˆªæ é”™è¯¯ä¿¡æ¯æˆªå›¾](./img/navbar-error.jpg)

### å›½é™…åŒ–

æˆ‘ä»¬æ–°å¢äº†å¯¹ä»¥ä¸‹å…ƒç´ çš„ç¿»è¯‘æ”¯æŒï¼š

- [#8677](https://github.com/facebook/docusaurus/pull/8677) å¼•å…¥äº†å®éªŒæ€§ç¯å¢ƒå˜é‡ `process.env.DOCUSAURUS_CURRENT_LOCALE`ï¼Œå…è®¸å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œæœ¬åœ°åŒ–ï¼ŒåŒ…æ‹¬ç«™ç‚¹æ ‡é¢˜ã€æ ‡è¯­ã€å…¬å‘Šæ ã€åŸºç¡€URLç­‰
- [#8616](https://github.com/facebook/docusaurus/pull/8616) å®ç°äº†å¯¼èˆªæ å’Œé¡µè„šLogoæ›¿ä»£æ–‡æœ¬çš„ç¿»è¯‘æ”¯æŒ

æˆ‘ä»¬ä¸ºä»¥ä¸‹è¯­è¨€æ–°å¢äº†é»˜è®¤ä¸»é¢˜ç¿»è¯‘æ”¯æŒï¼š

- ğŸ‡­ğŸ‡º [#8668](https://github.com/facebook/docusaurus/pull/8668): åŒˆç‰™åˆ©è¯­
- ğŸ‡³ğŸ‡´ [#8631](https://github.com/facebook/docusaurus/pull/8631): æŒªå¨è¯­ï¼ˆä¹¦é¢æŒªå¨è¯­ï¼‰

:::tip

å®Œå–„ä¸»é¢˜ç¿»è¯‘æ˜¯[æŒç»­è¿›è¡Œçš„å·¥ä½œ](https://github.com/facebook/docusaurus/issues/3526)ï¼Œä¹Ÿæ˜¯ä¸ºDocusaurusåšè´¡çŒ®çš„ä¾¿æ·æ–¹å¼ã€‚æˆ‘ä»¬ä¼šå®šæœŸæ–°å¢ä¸»é¢˜åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½é€šå¸¸[éœ€è¦æ–°çš„ç¿»è¯‘](https://github.com/facebook/docusaurus/issues/3526)ã€‚

:::

## å…¶ä»–å˜æ›´

å…¶ä»–å€¼å¾—æ³¨æ„çš„å˜æ›´åŒ…æ‹¬ï¼š

- [#8674](https://github.com/facebook/docusaurus/pull/8674): éµå¾ª `prefers-reduced-motion: reduce` åª’ä½“æŸ¥è¯¢
- [#8712](https://github.com/facebook/docusaurus/pull/8712): åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ç±»å‹ä¸º `docSidebar` çš„å¯¼èˆªæ é¡¹ç›®
- [#8801](https://github.com/facebook/docusaurus/pull/8801): å…è®¸æ ‡ç­¾é¡µå­å…ƒç´ ä¸ºå‡å€¼
- [#8757](https://github.com/facebook/docusaurus/pull/8757): ä½¿æœç´¢é¡µé¢å“åº”å¤–éƒ¨æŸ¥è¯¢å­—ç¬¦ä¸²å˜åŒ–
- [#8803](https://github.com/facebook/docusaurus/pull/8803): ä¿®å¤RTLå¸ƒå±€ä¸‹ä»£ç å—æŒ‰é’®ä½ç½®
- [#8615](https://github.com/facebook/docusaurus/pull/8615): ä¿®å¤ä½¿ç”¨æ·±è‰²å¯¼èˆªæ æ—¶çš„è‰²å½©æ¨¡å¼åˆ‡æ¢é—®é¢˜
- [#8699](https://github.com/facebook/docusaurus/pull/8699): ä¿®å¤å¯¼èˆªæ ä¸‹æ‹‰èœå•æ ‡ç­¾ç„¦ç‚¹é”™è¯¯

å®Œæ•´å˜æ›´åˆ—è¡¨è¯·æŸ¥çœ‹ **[2.4.0ç‰ˆæœ¬æ›´æ–°æ—¥å¿—](/changelog/2.4.0)**ã€‚