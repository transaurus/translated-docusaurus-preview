---
id: toc
description: Customizing headings and table-of-contents in Markdown
slug: /markdown-features/toc
---

import BrowserWindow from '@site/src/components/BrowserWindow';

# 标题与目录

## Markdown标题 {#markdown-headings}

您可以使用常规的Markdown标题语法。

```md
## Level 2 title

### Level 3 title

#### Level 4 title
```

每个Markdown标题都会在目录中生成对应条目。

### 标题ID {#heading-ids}

每个标题都有一个可自动生成或显式指定的ID。标题ID允许您通过Markdown或JSX链接到特定文档章节：

```md
[link](#heading-id)
```

```jsx
<Link to="#heading-id">link</Link>
```

默认情况下，Docusaurus会根据标题文本自动生成ID。例如`### Hello World`会生成ID`hello-world`。

自动生成的ID存在以下限制：

- 生成的ID可能不够美观
- 当您需要更改或翻译标题文本时，可能希望保留原有ID

通过特殊Markdown语法可设置显式标题ID：

<Code language="md">{'### Hello World \u007B#my-explicit-id}\n'}</Code>

:::tip

使用**[`write-heading-ids`](../../cli.mdx#docusaurus-write-heading-ids-sitedir)** CLI命令可为所有Markdown文档添加显式ID。

:::

:::warning[避免ID冲突]

自动生成的标题ID在单页面内保证唯一性。若使用自定义ID，请确保每个ID在页面内只出现一次，否则会导致HTML语义无效且无法链接到重复的标题。

:::

## 目录标题层级 {#table-of-contents-heading-level}

每个Markdown文档右上角会显示目录。默认仅展示h2和h3标题，这通常足以呈现页面结构。如需调整显示的标题范围，可针对单个页面或全局配置最小/最大标题层级。

通过front matter的`toc_min_heading_level`和`toc_max_heading_level`可设置单个页面的标题层级：

```md title="myDoc.md"
---
# Display h2 to h5 headings
toc_min_heading_level: 2
toc_max_heading_level: 5
---
```

通过[`themeConfig.tableOfContents`](../../api/themes/theme-configuration.mdx#table-of-contents)选项可设置所有页面的标题层级：

```js title="docusaurus.config.js"
export default {
  themeConfig: {
    tableOfContents: {
      // highlight-start
      minHeadingLevel: 2,
      maxHeadingLevel: 5,
      // highlight-end
    },
  },
};
```

全局配置后仍可通过front matter进行局部覆盖。

:::note

`themeConfig`选项会影响站点所有目录（包括[行内目录](#inline-table-of-contents)），而front matter仅影响右上角目录。每个`<TOCInline />`组件需通过`minHeadingLevel`和`maxHeadingLevel`属性单独配置。

:::

## 行内目录 {#inline-table-of-contents}

借助MDX功能，您还可以在Markdown文档内部直接嵌入行内目录。

MDX文档中可访问`toc`变量，其中包含该文档所有标题。默认仅显示`h2`和`h3`标题。通过为每个`TOCInline`组件设置`minHeadingLevel`或`maxHeadingLevel`可调整显示的标题层级。

```jsx
import TOCInline from '@theme/TOCInline';

<TOCInline toc={toc} />
```

import TOCInline from '@theme/TOCInline';

<BrowserWindow>
<TOCInline toc={toc} />
</BrowserWindow>

`toc`全局变量是标题项的扁平化数组：

```ts
declare const toc: {
  value: string;
  id: string;
  level: number;
}[];
```

由于`toc`是扁平数组，您可以轻松移除不需要的节点或插入额外节点，从而创建新的目录树。

```jsx
import TOCInline from '@theme/TOCInline';

<TOCInline
  // Only show h2 and h4 headings
  toc={toc.filter((node) => node.level === 2 || node.level === 4)}
  minHeadingLevel={2}
  // Show h4 headings in addition to the default h2 and h3 headings
  maxHeadingLevel={4}
/>
```

<BrowserWindow>
<TOCInline
  toc={toc.filter((node) => node.level === 2 || node.level === 4)}
  minHeadingLevel={2}
  maxHeadingLevel={4}
/>
</BrowserWindow>

## 自定义目录生成 {#customizing-table-of-contents-generation}

目录是通过[Remark插件](./markdown-features-plugins.mdx)解析Markdown源代码生成的。存在已知的边缘情况会导致生成假阳性或假阴性结果。

可隐藏区域内的Markdown标题仍会显示在目录中。例如，[`Tabs`](./markdown-features-tabs.mdx)和[`details`](./markdown-features-intro.mdx#details)内的标题不会被排除。

非Markdown标题不会出现在目录中。这可以巧妙利用来解决上述问题。

```md
<details>
<summary>Some details containing headings</summary>
<h2 id="#heading-id">I'm a heading that will not show up in the TOC</h2>

Some content...

</details>
```

目前尚无法便捷地插入额外标题或忽略特定标题，该功能正在开发中。如果您需要此功能，请在[此issue](https://github.com/facebook/docusaurus/issues/6201)中说明您的使用场景。

---

:::warning

以下仅为虚拟内容，用于在当前页面生成更多目录项。

:::

## 示例章节1 {#example-section-1}

占位文本

### 示例子章节1a {#example-subsection-1-a}

占位文本

#### 示例子章节1aI

#### 示例子章节1aII

#### 示例子章节1aIII

### 示例子章节1b {#example-subsection-1-b}

占位文本

#### 示例子章节1bI

#### 示例子章节1bII

#### 示例子章节1bIII

### 示例子章节1c {#example-subsection-1-c}

占位文本

#### 示例子章节1cI

#### 示例子章节1cII

#### 示例子章节1cIII

## 示例章节2 {#example-section-2}

占位文本

### 示例子章节2a {#example-subsection-2-a}

占位文本

#### 示例子章节2aI

#### 示例子章节2aII

#### 示例子章节2aIII

### 示例子章节2b {#example-subsection-2-b}

占位文本

#### 示例子章节2bI

#### 示例子章节2bII

#### 示例子章节2bIII

### 示例子章节2c {#example-subsection-2-c}

占位文本

#### 示例子章节2cI

#### 示例子章节2cII

#### 示例子章节2cIII

## 示例章节3 {#example-section-3}

占位文本

### 示例子章节3a {#example-subsection-3-a}

占位文本

#### 示例子章节3aI

#### 示例子章节3aII

#### 示例子章节3aIII

### 示例子章节3b {#example-subsection-3-b}

占位文本

#### 示例子小节 3 b I

#### 示例子小节 3 b II

#### 示例子小节 3 b III

### 示例子章节 3 c {#example-subsection-3-c}

占位文本

#### 示例子小节 3 c I

#### 示例子小节 3 c II

#### 示例子小节 3 c III