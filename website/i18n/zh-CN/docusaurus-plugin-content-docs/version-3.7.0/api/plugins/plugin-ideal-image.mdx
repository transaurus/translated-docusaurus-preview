---
sidebar_position: 8
slug: /api/plugins/@docusaurus/plugin-ideal-image
---

# ğŸ“¦ plugin-ideal-image

import APITable from '@site/src/components/APITable';

Docusaurusæ’ä»¶ï¼Œç”¨äºç”Ÿæˆè¿‘ä¹ç†æƒ³çš„å›¾åƒï¼ˆå“åº”å¼ã€æ‡’åŠ è½½å’Œä½è´¨é‡å ä½å›¾ï¼‰ã€‚

:::info

é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ’ä»¶åœ¨å¼€å‘ç¯å¢ƒä¸­å¤„äº**éæ´»åŠ¨çŠ¶æ€**ï¼Œä»¥ä¾¿æ‚¨å§‹ç»ˆå¯ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒã€‚å¦‚éœ€è°ƒè¯•ç†æƒ³å›¾åƒè¡Œä¸ºï¼Œå¯å°†[`disableInDev`](#disableInDev)é€‰é¡¹è®¾ä¸º`false`ã€‚

:::

## å®‰è£… {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-ideal-image
```

## ä½¿ç”¨æ–¹æ³• {#usage}

è¯¥æ’ä»¶ä»…æ”¯æŒPNGå’ŒJPGæ ¼å¼ã€‚

```jsx
import Image from '@theme/IdealImage';
import thumbnail from './path/to/img.png';

// your React code
<Image img={thumbnail} />

// or
<Image img={require('./path/to/img.png')} />
```

:::warning

æœ¬æ’ä»¶ä¼šæ³¨å†Œä¸€ä¸ª[WebpackåŠ è½½å™¨](https://webpack.js.org/loaders/)ï¼Œæ”¹å˜å¯¼å…¥/è¯·æ±‚å›¾åƒçš„ç±»å‹ï¼š

- ä¹‹å‰ï¼š`string`
- ä¹‹åï¼š`{preSrc: string, src: import("@theme/IdealImage").SrcImage}`

:::

:::warning[é’ˆå¯¹pnpmç”¨æˆ·]

ä»[pnpm 10](https://github.com/pnpm/pnpm/releases/tag/v10.0.0)å¼€å§‹ï¼Œè¿è¡Œ`pnpm install`é»˜è®¤ä¸ä¼šæ‰§è¡Œä¾èµ–é¡¹çš„å®‰è£…è„šæœ¬ã€‚ä¸ºäº†è®©æˆ‘ä»¬çš„å›¾åƒç¼©æ”¾ä¾èµ–é¡¹`sharp`æ­£ç¡®å®‰è£…ï¼Œæ‚¨éœ€è¦é¢å¤–çš„pnpmé…ç½®ï¼ˆ[ç›¸å…³issue](https://github.com/lovell/sharp/issues/4343)ï¼‰ï¼Œä¾‹å¦‚ï¼š

```json title="package.json"
{
  "pnpm": {
    "onlyBuiltDependencies": ["fsevents"]
  }
}
```

## é…ç½®é¡¹ {#configuration}

å¯æ¥å—å­—æ®µï¼š

<APITable>

| é€‰é¡¹ | ç±»å‹ | é»˜è®¤å€¼ | æè¿° |
| --- | --- | --- | --- |
| `name` | `string` | `ideal-img/[name].[hash:hex:7].[width].[ext]` | è¾“å‡ºæ–‡ä»¶çš„å‘½åæ¨¡æ¿ã€‚ |
| `sizes` | `number[]` | _åŸå§‹å°ºå¯¸_ | æŒ‡å®šæ‰€æœ‰éœ€è¦ä½¿ç”¨çš„å®½åº¦ã€‚è‹¥æŒ‡å®šå°ºå¯¸è¶…è¿‡åŸå›¾å®½åº¦ï¼Œåˆ™ä½¿ç”¨åŸå›¾å®½åº¦ï¼ˆå³å›¾åƒä¸ä¼šè¢«æ”¾å¤§ï¼‰ã€‚ |
| `size` | `number` | _åŸå§‹å°ºå¯¸_ | æŒ‡å®šå•ä¸ªéœ€è¦ä½¿ç”¨çš„å®½åº¦ï¼›è‹¥æŒ‡å®šå°ºå¯¸è¶…è¿‡åŸå›¾å®½åº¦ï¼Œåˆ™ä½¿ç”¨åŸå›¾å®½åº¦ï¼ˆå³å›¾åƒä¸ä¼šè¢«æ”¾å¤§ï¼‰ |
| `min` | `number` |  | ä½œä¸ºæ‰‹åŠ¨æŒ‡å®š`sizes`çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ‚¨å¯æŒ‡å®š`min`ã€`max`å’Œ`steps`ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆå°ºå¯¸ã€‚ |
| `max` | `number` |  | å‚è§ä¸Šè¿°`min`è¯´æ˜ |
| `steps` | `number` | `4` | é…ç½®åœ¨`min`å’Œ`max`ä¹‹é—´ï¼ˆå«ï¼‰ç”Ÿæˆçš„å›¾åƒæ•°é‡ |
| `quality` | `number` | `85` | JPEGå‹ç¼©è´¨é‡ |
| `disableInDev` | `boolean` | `true` | é€šè¿‡è®¾ä¸º`false`å¯åœ¨å¼€å‘æ¨¡å¼æµ‹è¯•ç†æƒ³å›¾åƒè¡Œä¸ºã€‚**æŠ€å·§**ï¼šä½¿ç”¨æµè§ˆå™¨[ç½‘ç»œèŠ‚æµ](https://www.browserstack.com/guide/how-to-perform-network-throttling-in-chrome)æ¨¡æ‹Ÿæ…¢é€Ÿç½‘ç»œã€‚ |

</APITable>

### é…ç½®ç¤ºä¾‹ {#ex-config}

ä»¥ä¸‹ä¸ºé…ç½®ç¤ºä¾‹ï¼š

```js title="docusaurus.config.js"
export default {
  plugins: [
    [
      '@docusaurus/plugin-ideal-image',
      // highlight-start
      {
        quality: 70,
        max: 1030, // è°ƒæ•´åå›¾åƒçš„æœ€å¤§å°ºå¯¸
        min: 640, // è°ƒæ•´åå›¾åƒçš„æœ€å°å°ºå¯¸ã€‚è‹¥åŸå›¾å°ºå¯¸æ›´å°ï¼Œåˆ™ä½¿ç”¨åŸå›¾å°ºå¯¸
        steps: 2, // åœ¨minå’Œmaxä¹‹é—´ï¼ˆå«ï¼‰ç”Ÿæˆå›¾åƒçš„æœ€å¤§æ•°é‡
        disableInDev: false,
      },
      // highlight-end
    ],
  ],
};
```