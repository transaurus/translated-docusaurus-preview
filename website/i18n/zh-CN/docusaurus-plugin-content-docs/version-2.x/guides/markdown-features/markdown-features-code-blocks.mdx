---
id: code-blocks
description: Handling code blocks in Docusaurus Markdown
slug: /markdown-features/code-blocks
---

# ä»£ç å—

import BrowserWindow from '@site/src/components/BrowserWindow';
import CodeBlock from '@theme/CodeBlock';

æ–‡æ¡£ä¸­çš„ä»£ç å—å…·æœ‰è¶…å¼ºåŠŸèƒ½ ğŸ’ªã€‚

## ä»£ç æ ‡é¢˜ {#code-title}

æ‚¨å¯ä»¥é€šè¿‡åœ¨è¯­è¨€åæ·»åŠ  `title` é”®ï¼ˆä¸¤è€…ä¹‹é—´ç•™ä¸€ä¸ªç©ºæ ¼ï¼‰æ¥ä¸ºä»£ç å—æ·»åŠ æ ‡é¢˜ã€‚

````md
```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}
```
````

<BrowserWindow>

```jsx title="/src/components/HelloCodeTitle.js"
function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}
```

</BrowserWindow>

## è¯­æ³•é«˜äº® {#syntax-highlighting}

ä»£ç å—æ˜¯ç”±3ä¸ªåå¼•å·åŒ…è£¹çš„æ–‡æœ¬å—ã€‚æ‚¨å¯ä»¥æŸ¥é˜…[æ­¤å‚è€ƒ](https://github.com/mdx-js/specification)äº†è§£MDXçš„è§„èŒƒã€‚

````md
```js
console.log('Every repo must come with a mascot.');
```
````

ä¸ºæ‚¨çš„ä»£ç å—ä½¿ç”¨åŒ¹é…çš„è¯­è¨€å…ƒå­—ç¬¦ä¸²ï¼ŒDocusauruså°†è‡ªåŠ¨å¯ç”¨è¯­æ³•é«˜äº®ï¼Œè¯¥åŠŸèƒ½ç”±[Prism React Renderer](https://github.com/FormidableLabs/prism-react-renderer)æä¾›æ”¯æŒã€‚

<BrowserWindow>

```js
console.log('Every repo must come with a mascot.');
```

</BrowserWindow>

### ä¸»é¢˜ {#theming}

é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„Prism[è¯­æ³•é«˜äº®ä¸»é¢˜](https://github.com/FormidableLabs/prism-react-renderer#theming)æ˜¯[Palenight](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/prism-react-renderer/src/themes/palenight.ts)ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨docusaurus.config.jsçš„`themeConfig`ä¸­ä¼ é€’`prism`çš„`theme`å­—æ®µæ¥æ›´æ”¹ä¸ºå…¶ä»–ä¸»é¢˜ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ›´å–œæ¬¢ä½¿ç”¨`dracula`é«˜äº®ä¸»é¢˜ï¼š

```js title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    prism: {
      // highlight-next-line
      theme: require('prism-react-renderer/themes/dracula'),
    },
  },
};
```

ç”±äºPrismä¸»é¢˜åªæ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œå¦‚æœæ‚¨å¯¹é»˜è®¤ä¸»é¢˜ä¸æ»¡æ„ï¼Œä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„ä¸»é¢˜ã€‚Docusauruså¢å¼ºäº†`github`å’Œ`vsDark`ä¸»é¢˜ä»¥æä¾›æ›´ä¸°å¯Œçš„é«˜äº®æ•ˆæœï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹æˆ‘ä»¬å¯¹[æµ…è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismLight.ts)å’Œ[æ·±è‰²](https://github.com/facebook/docusaurus/blob/main/website/src/utils/prismDark.ts)ä»£ç å—ä¸»é¢˜çš„å®ç°ã€‚

### æ”¯æŒçš„è¯­è¨€ {#supported-languages}

é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocusaurusé™„å¸¦äº†ä¸€ç»„[å¸¸ç”¨è¯­è¨€](https://github.com/FormidableLabs/prism-react-renderer/blob/master/packages/generate-prism-languages/index.ts#L9-L23)ã€‚

:::warning

ä¸€äº›æµè¡Œè¯­è¨€å¦‚Javaã€C#æˆ–PHPé»˜è®¤æœªå¯ç”¨ã€‚

:::

è¦ä¸ºå…¶ä»–[Prismæ”¯æŒçš„è¯­è¨€](https://prismjs.com/#supported-languages)æ·»åŠ è¯­æ³•é«˜äº®ï¼Œè¯·åœ¨é™„åŠ è¯­è¨€æ•°ç»„ä¸­å®šä¹‰å®ƒä»¬ã€‚

:::note

æ¯ç§é™„åŠ è¯­è¨€å¿…é¡»æ˜¯æœ‰æ•ˆçš„Prismç»„ä»¶åç§°ã€‚ä¾‹å¦‚ï¼ŒPrismä¼šå°†è¯­è¨€`cs`æ˜ å°„åˆ°`csharp`ï¼Œä½†åªæœ‰`prism-csharp.js`ä½œä¸º_ç»„ä»¶_å­˜åœ¨ï¼Œå› æ­¤æ‚¨éœ€è¦ä½¿ç”¨`additionalLanguages: ['csharp']`ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹`node_modules/prismjs/components`ä»¥æ‰¾åˆ°æ‰€æœ‰å¯ç”¨çš„ç»„ä»¶ï¼ˆè¯­è¨€ï¼‰ã€‚

:::

ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³ä¸ºPowerShellè¯­è¨€æ·»åŠ é«˜äº®ï¼š

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    prism: {
      // highlight-next-line
      additionalLanguages: ['powershell'],
    },
    // ...
  },
};
```

æ·»åŠ `additionalLanguages`åï¼Œè¯·é‡å¯Docusaurusã€‚

å¦‚æœæ‚¨æƒ³ä¸ºPrismå°šæœªæ”¯æŒçš„è¯­è¨€æ·»åŠ é«˜äº®ï¼Œå¯ä»¥swizzle `prism-include-languages`ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic prism-include-languages
```

è¿™å°†åœ¨æ‚¨çš„`src/theme`æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆ`prism-include-languages.js`ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–è¾‘`prism-include-languages.js`æ¥ä¸ºè‡ªå®šä¹‰è¯­è¨€æ·»åŠ é«˜äº®æ”¯æŒï¼š

```js title="src/theme/prism-include-languages.js"
const prismIncludeLanguages = (Prism) => {
  // ...

  additionalLanguages.forEach((lang) => {
    require(`prismjs/components/prism-${lang}`);
  });

  // highlight-next-line
  require('/path/to/your/prism-language-definition');

  // ...
};
```

åœ¨ç¼–å†™è‡ªå·±çš„è¯­è¨€å®šä¹‰æ—¶ï¼Œæ‚¨å¯ä»¥å‚è€ƒ[Prismçš„å®˜æ–¹è¯­è¨€å®šä¹‰](https://github.com/PrismJS/prism/tree/master/components)ã€‚

## è¡Œé«˜äº® {#line-highlighting}

### é€šè¿‡æ³¨é‡Šå®ç°é«˜äº® {#highlighting-with-comments}

æ‚¨å¯ä»¥ä½¿ç”¨å¸¦æœ‰ `highlight-next-line`ã€`highlight-start` å’Œ `highlight-end` çš„æ³¨é‡Šæ¥é€‰æ‹©éœ€è¦é«˜äº®çš„è¡Œã€‚

````md
```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'This text is highlighted!';
  }

  return 'Nothing highlighted';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'This range is highlighted!';
  }
  // highlight-end

  return 'Nothing highlighted';
}
```
````

<BrowserWindow>

```js
function HighlightSomeText(highlight) {
  if (highlight) {
    // highlight-next-line
    return 'This text is highlighted!';
  }

  return 'Nothing highlighted';
}

function HighlightMoreText(highlight) {
  // highlight-start
  if (highlight) {
    return 'This range is highlighted!';
  }
  // highlight-end

  return 'Nothing highlighted';
}
```

</BrowserWindow>

æ”¯æŒçš„æ³¨é‡Šè¯­æ³•ï¼š

| Style      | Syntax                   |
| ---------- | ------------------------ |
| C-style    | `/* ... */` and `// ...` |
| JSX-style  | `{/* ... */}`            |
| Bash-style | `# ...`                  |
| HTML-style | `<!-- ... -->`           |

æˆ‘ä»¬ä¼šæ ¹æ®è¯­è¨€ç±»å‹è‡ªåŠ¨æ¨æ–­é€‚ç”¨çš„æ³¨é‡Šé£æ ¼ï¼Œé»˜è®¤å…è®¸ä½¿ç”¨æ‰€æœ‰æ³¨é‡Šé£æ ¼ã€‚å¦‚æœæœ‰æœªè¢«æ”¯æŒçš„æ³¨é‡Šé£æ ¼ï¼Œæ¬¢è¿æäº¤æ‹‰å–è¯·æ±‚æ·»åŠ æ”¯æŒã€‚è¯·æ³¨æ„ï¼Œä¸åŒæ³¨é‡Šé£æ ¼æ²¡æœ‰è¯­ä¹‰å·®å¼‚ï¼Œä»…å†…å®¹æœ¬èº«èµ·ä½œç”¨ã€‚

æ‚¨å¯ä»¥åœ¨ `src/css/custom.css` ä¸­ä¸ºé«˜äº®ä»£ç è¡Œè®¾ç½®è‡ªå®šä¹‰èƒŒæ™¯è‰²ï¼Œä»¥æ›´å¥½åœ°é€‚é…æ‚¨é€‰æ‹©çš„è¯­æ³•é«˜äº®ä¸»é¢˜ã€‚ä¸‹æ–¹ç»™å‡ºçš„é¢œè‰²å€¼é€‚ç”¨äºé»˜è®¤é«˜äº®ä¸»é¢˜ï¼ˆPalenightï¼‰ï¼Œè‹¥ä½¿ç”¨å…¶ä»–ä¸»é¢˜éœ€ç›¸åº”è°ƒæ•´é¢œè‰²å€¼ã€‚

```css title="/src/css/custom.css"
:root {
  --docusaurus-highlighted-code-line-bg: rgb(72, 77, 91);
}

/* If you have a different syntax highlighting theme for dark mode. */
[data-theme='dark'] {
  /* Color which works with dark mode syntax highlighting theme */
  --docusaurus-highlighted-code-line-bg: rgb(100, 100, 100);
}
```

å¦‚éœ€å¯¹é«˜äº®ä»£ç è¡Œè¿›è¡Œå…¶ä»–æ ·å¼å®šåˆ¶ï¼Œå¯ä»¥é’ˆå¯¹ `theme-code-block-highlighted-line` CSS ç±»è¿›è¡Œæ ·å¼è®¾ç½®ã€‚

### é€šè¿‡å…ƒæ•°æ®å­—ç¬¦ä¸²å®ç°é«˜äº® {#highlighting-with-metadata-string}

æ‚¨ä¹Ÿå¯ä»¥åœ¨è¯­è¨€å…ƒå­—ç¬¦ä¸²ä¸­æŒ‡å®šé«˜äº®è¡ŒèŒƒå›´ï¼ˆéœ€åœ¨è¯­è¨€åç•™ç©ºæ ¼ï¼‰ã€‚è¦çªå‡ºæ˜¾ç¤ºå¤šè¡Œï¼Œå¯ç”¨é€—å·åˆ†éš”è¡Œå·æˆ–ä½¿ç”¨èŒƒå›´è¯­æ³•é€‰æ‹©è¿ç»­è¡Œã€‚æ­¤åŠŸèƒ½ä½¿ç”¨ `parse-number-range` åº“ï¼Œæ›´å¤šè¯­æ³•è¯·å‚è€ƒ[é¡¹ç›®æ–‡æ¡£](https://www.npmjs.com/package/parse-numeric-range)ã€‚

````md
```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```
````

<BrowserWindow>

```jsx {1,4-6,11}
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```

</BrowserWindow>

:::tip[ä¼˜å…ˆä½¿ç”¨æ³¨é‡Š]

å»ºè®®å°½å¯èƒ½ä½¿ç”¨æ³¨é‡Šå®ç°é«˜äº®ã€‚é€šè¿‡åœ¨ä»£ç ä¸­å†…è”é«˜äº®æ ‡è®°ï¼Œæ‚¨æ— éœ€åœ¨ä»£ç å—è¾ƒé•¿æ—¶æ‰‹åŠ¨è®¡ç®—è¡Œå·ã€‚å½“å¢åˆ ä»£ç è¡Œæ—¶ï¼Œä¹Ÿæ— éœ€è°ƒæ•´è¡Œå·èŒƒå›´ã€‚

````diff
- ```jsx {3}
+ ```jsx {4}
  function HighlightSomeText(highlight) {
    if (highlight) {
+     console.log('å‘ç°é«˜äº®æ–‡æœ¬');
      return 'è¿™æ®µæ–‡æœ¬è¢«é«˜äº®äº†ï¼';
    }

    return 'æ— é«˜äº®å†…å®¹';
  }
  ```
````

ä¸‹æ–‡å°†ä»‹ç»å¦‚ä½•æ‰©å±•é­”æ³•æ³¨é‡Šç³»ç»Ÿæ¥å®šä¹‰è‡ªå®šä¹‰æŒ‡ä»¤åŠå…¶åŠŸèƒ½ã€‚ä»…å½“ä¸å­˜åœ¨é«˜äº®å…ƒå­—ç¬¦ä¸²æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šè§£æè¿™äº›é­”æ³•æ³¨é‡Šã€‚

:::

### è‡ªå®šä¹‰é­”æ³•æ³¨é‡Š {#custom-magic-comments}

`// highlight-next-line` å’Œ `// highlight-start` ç­‰è¢«ç§°ä¸º"é­”æ³•æ³¨é‡Š"ï¼Œå› ä¸ºå®ƒä»¬ä¼šè¢«è§£æå¹¶ç§»é™¤ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºä¸‹ä¸€è¡Œæˆ–è¢«å¼€å§‹/ç»“æŸæ³¨é‡Šå¯¹åŒ…è£¹çš„ä»£ç æ®µæ·»åŠ å…ƒæ•°æ®ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä¸»é¢˜é…ç½®å£°æ˜è‡ªå®šä¹‰é­”æ³•æ³¨é‡Šã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æ³¨å†Œå¦ä¸€ä¸ªä¸ºä»£ç è¡Œæ·»åŠ  `code-block-error-line` ç±»åçš„é­”æ³•æ³¨é‡Šï¼š

<Tabs>
<TabItem value="docusaurus.config.js">

```js
module.exports = {
  themeConfig: {
    prism: {
      magicComments: [
        // Remember to extend the default highlight class name as well!
        {
          className: 'theme-code-block-highlighted-line',
          line: 'highlight-next-line',
          block: {start: 'highlight-start', end: 'highlight-end'},
        },
        // highlight-start
        {
          className: 'code-block-error-line',
          line: 'This will error',
        },
        // highlight-end
      ],
    },
  },
};
```

</TabItem>
<TabItem value="src/css/custom.css">

```css
.code-block-error-line {
  background-color: #ff000020;
  display: block;
  margin: 0 calc(-1 * var(--ifm-pre-padding));
  padding: 0 var(--ifm-pre-padding);
  border-left: 3px solid #ff000080;
}
```

</TabItem>
<TabItem value="myDoc.md">

````md
In JavaScript, trying to access properties on `null` will error.

```js
const name = null;
// This will error
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```
````

</TabItem>
</Tabs>

<BrowserWindow>

In JavaScript, trying to access properties on `null` will error.

```js
const name = null;
// This will error
console.log(name.toUpperCase());
// Uncaught TypeError: Cannot read properties of null (reading 'toUpperCase')
```

</BrowserWindow>

å¦‚æœåœ¨å…ƒå­—ç¬¦ä¸²ä¸­ä½¿ç”¨æ•°å­—èŒƒå›´è¯­æ³•ï¼ˆå¦‚ `{1,3-4}`ï¼‰ï¼ŒDocusaurus å°†åº”ç”¨**é¦–ä¸ª `magicComments` æ¡ç›®**çš„ç±»åã€‚é»˜è®¤æƒ…å†µä¸‹è¿™æ˜¯ `theme-code-block-highlighted-line`ï¼Œä½†è‹¥ä¿®æ”¹ `magicComments` é…ç½®å¹¶ä½¿ç”¨ä¸åŒæ¡ç›®ä½œä¸ºé¦–é¡¹ï¼Œå…ƒå­—ç¬¦ä¸²èŒƒå›´çš„å«ä¹‰ä¹Ÿä¼šç›¸åº”æ”¹å˜ã€‚

å¯é€šè¿‡ `magicComments: []` ç¦ç”¨é»˜è®¤çš„è¡Œé«˜äº®æ³¨é‡Šã€‚å¦‚æœæ²¡æœ‰é­”æ³•æ³¨é‡Šé…ç½®ä½†å­˜åœ¨åŒ…å«å…ƒå­—ç¬¦ä¸²èŒƒå›´çš„ä»£ç å—ï¼ŒDocusaurus ä¼šæŠ¥é”™â€”â€”å› ä¸ºæ­¤æ—¶æ²¡æœ‰å¯åº”ç”¨çš„ç±»åï¼ˆæ¯•ç«Ÿé«˜äº®ç±»åæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé­”æ³•æ³¨é‡Šæ¡ç›®ï¼‰ã€‚

æ¯ä¸ªé­”æ³•æ³¨é‡Šæ¡ç›®åŒ…å«ä¸‰ä¸ªé”®ï¼šå¿…éœ€çš„ `className`ï¼Œä½œç”¨äºä¸‹ä¸€è¡Œçš„ `line`ï¼Œæˆ–åŒ…å« `start` å’Œ `end` çš„ `block`ï¼ˆä½œç”¨äºè¢«ä¸¤ä¸ªæ³¨é‡ŠåŒ…è£¹çš„æ•´ä¸ªä»£ç å—ï¼‰ã€‚

ä½¿ç”¨CSSé’ˆå¯¹ç±»åè¿›è¡Œæ ·å¼è®¾ç½®å·²ç»å¯ä»¥å®ç°å¾ˆå¤šåŠŸèƒ½ï¼Œä½†é€šè¿‡[ä¸»é¢˜å®šåˆ¶](../../swizzling.mdx)å¯ä»¥è§£é”è¯¥ç‰¹æ€§çš„å…¨éƒ¨æ½œåŠ›ã€‚

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic CodeBlock/Line
```

`Line`ç»„ä»¶ä¼šæ¥æ”¶åˆ°åŸºäºç±»ååˆ—è¡¨çš„å‚æ•°ï¼Œæ‚¨å¯ä»¥æ ¹æ®è¿™äº›ç±»åæ¡ä»¶å¼åœ°æ¸²æŸ“ä¸åŒçš„æ ‡è®°ã€‚

## è¡Œå·æ˜¾ç¤º {#line-numbering}

æ‚¨å¯ä»¥é€šè¿‡åœ¨è¯­è¨€å…ƒå­—ç¬¦ä¸²ä¸­ä½¿ç”¨`showLineNumbers`é”®æ¥å¯ç”¨ä»£ç å—çš„è¡Œå·æ˜¾ç¤ºï¼ˆæ³¨æ„é”®åå‰éœ€ä¿ç•™ç©ºæ ¼ï¼‰ã€‚

````md
```jsx {1,4-6,11} showLineNumbers
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```
````

<BrowserWindow>

```jsx {1,4-6,11} showLineNumbers
import React from 'react';

function MyComponent(props) {
  if (props.isBar) {
    return <div>Bar</div>;
  }

  return <div>Foo</div>;
}

export default MyComponent;
```

</BrowserWindow>

## äº¤äº’å¼ä»£ç ç¼–è¾‘å™¨ {#interactive-code-editor}

ï¼ˆç”±[React Live](https://github.com/FormidableLabs/react-live)æä¾›æ”¯æŒï¼‰

æ‚¨å¯ä»¥ä½¿ç”¨`@docusaurus/theme-live-codeblock`æ’ä»¶åˆ›å»ºäº¤äº’å¼ä»£ç ç¼–è¾‘å™¨ã€‚é¦–å…ˆå°†è¯¥æ’ä»¶æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚

```bash npm2yarn
npm install --save @docusaurus/theme-live-codeblock
```

åŒæ—¶éœ€è¦åœ¨`docusaurus.config.js`ä¸­é…ç½®è¯¥æ’ä»¶ã€‚

```js {3}
module.exports = {
  // ...
  themes: ['@docusaurus/theme-live-codeblock'],
  // ...
};
```

ä½¿ç”¨è¯¥æ’ä»¶æ—¶ï¼Œéœ€åœ¨è¯­è¨€å…ƒå­—ç¬¦ä¸²åé™„åŠ `live`æ ‡è¯†ã€‚

````md
```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>It is {date.toLocaleTimeString()}.</h2>
    </div>
  );
}
```
````

ä»£ç å—å°†è¢«æ¸²æŸ“ä¸ºäº¤äº’å¼ç¼–è¾‘å™¨ï¼Œä»£ç ä¿®æ”¹ä¼šå®æ—¶åæ˜ åœ¨ç»“æœé¢æ¿ä¸­ã€‚

<BrowserWindow>

```jsx live
function Clock(props) {
  const [date, setDate] = useState(new Date());
  useEffect(() => {
    const timerID = setInterval(() => tick(), 1000);

    return function cleanup() {
      clearInterval(timerID);
    };
  });

  function tick() {
    setDate(new Date());
  }

  return (
    <div>
      <h2>It is {date.toLocaleTimeString()}.</h2>
    </div>
  );
}
```

</BrowserWindow>

### å¯¼å…¥ä¾èµ– {#imports}

:::warning[react-liveä¸å¯¼å…¥é™åˆ¶]

æ— æ³•ç›´æ¥ä»react-liveä»£ç ç¼–è¾‘å™¨å¯¼å…¥ç»„ä»¶ï¼Œå¿…é¡»é¢„å…ˆå®šä¹‰å¯ç”¨çš„å¯¼å…¥é¡¹ã€‚

:::

é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰Reactå¯¼å…¥éƒ½å¯ç”¨ã€‚å¦‚éœ€æ›´å¤šå¯¼å…¥é¡¹ï¼Œè¯·é€šè¿‡ä¸»é¢˜å®šåˆ¶æ‰©å±•react-liveä½œç”¨åŸŸï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-live-codeblock ReactLiveScope -- --eject
```

```jsx title="src/theme/ReactLiveScope/index.js"
import React from 'react';

// highlight-start
const ButtonExample = (props) => (
  <button
    {...props}
    style={{
      backgroundColor: 'white',
      color: 'black',
      border: 'solid red',
      borderRadius: 20,
      padding: 10,
      cursor: 'pointer',
      ...props.style,
    }}
  />
);
// highlight-end

// Add react-live imports you need here
const ReactLiveScope = {
  React,
  ...React,
  // highlight-next-line
  ButtonExample,
};

export default ReactLiveScope;
```

ç°åœ¨`ButtonExample`ç»„ä»¶å·²å¯ä¾›ä½¿ç”¨ï¼š

<BrowserWindow>

```jsx live
function MyPlayground(props) {
  return (
    <div>
      <ButtonExample onClick={() => alert('hey!')}>Click me</ButtonExample>
    </div>
  );
}
```

</BrowserWindow>

### å‘½ä»¤å¼æ¸²æŸ“ï¼ˆnoInlineï¼‰

å½“ä»£ç æ¶‰åŠå¤šä¸ªç»„ä»¶æˆ–å˜é‡æ—¶ï¼Œåº”ä½¿ç”¨`noInline`é€‰é¡¹æ¥é¿å…é”™è¯¯ã€‚

````md
```jsx live noInline
const project = 'Docusaurus';

const Greeting = () => <p>Hello {project}!</p>;

render(<Greeting />);
```
````

ä¸æ™®é€šäº¤äº’å¼ä»£ç å—ä¸åŒï¼Œä½¿ç”¨`noInline`æ—¶React Liveä¸ä¼šå°†ä»£ç åŒ…è£¹åœ¨å†…è”å‡½æ•°ä¸­è¿›è¡Œæ¸²æŸ“ã€‚

æ‚¨éœ€è¦åœ¨ä»£ç æœ«å°¾æ˜¾å¼è°ƒç”¨`render()`æ¥æ˜¾ç¤ºè¾“å‡ºç»“æœã€‚

<BrowserWindow>

```jsx live noInline
const project = "Docusaurus";

const Greeting = () => (
  <p>Hello {project}!</p>
);

render(
  <Greeting />
);
```

</BrowserWindow>

## åœ¨ä»£ç å—ä¸­ä½¿ç”¨JSXæ ‡è®° {#using-jsx-markup}

Markdownä¸­çš„ä»£ç å—å§‹ç»ˆå°†å…¶å†…å®¹ä¿ç•™ä¸ºçº¯æ–‡æœ¬ï¼Œè¿™æ„å‘³ç€æ‚¨æ— æ³•å®ç°å¦‚ä¸‹æ“ä½œï¼š

```ts
type EditUrlFunction = (params: {
  // This doesn't turn into a link (for good reason!)
  version: <a href="/docs/versioning">Version</a>;
  versionDocsDirPath: string;
  docPath: string;
  permalink: string;
  locale: string;
}) => string | undefined;
```

å¦‚éœ€åµŒå…¥HTMLæ ‡è®°ï¼ˆå¦‚é”šé“¾æ¥æˆ–åŠ ç²—æ–‡æœ¬ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨`<pre>`æ ‡ç­¾ã€`<code>`æ ‡ç­¾æˆ–`<CodeBlock>`ç»„ä»¶ã€‚

```jsx
<pre>
  <b>Input: </b>1 2 3 4{'\n'}
  <b>Output: </b>"366300745"{'\n'}
</pre>
```

<BrowserWindow>
  <pre>
    <b>{'Input: '}</b>
    {'1 2 3 4\n'}
    <b>{'Output: '}</b>
    {'"366300745"\n'}
  </pre>
</BrowserWindow>

:::warning[MDXå¯¹ç©ºç™½å­—ç¬¦ä¸æ•æ„Ÿ]

MDXéµå¾ªJSXè¡Œä¸ºè§„èŒƒï¼šå³ä½¿æ˜¯`<pre>`å†…çš„æ¢è¡Œç¬¦ä¹Ÿä¼šè¢«è½¬æ¢ä¸ºç©ºæ ¼ã€‚å¿…é¡»æ˜¾å¼å†™å…¥æ¢è¡Œç¬¦æ‰èƒ½è¾“å‡ºã€‚

:::

:::warning

è¯­æ³•é«˜äº®ä»…å¯¹çº¯å­—ç¬¦ä¸²æœ‰æ•ˆã€‚Docusaurusä¸ä¼šå°è¯•è§£æåŒ…å«JSXå­å…ƒç´ çš„ä»£ç å—å†…å®¹ã€‚

:::

## å¤šè¯­è¨€æ”¯æŒä»£ç å— {#multi-language-support-code-blocks}

å€ŸåŠ©MDXï¼Œæ‚¨å¯ä»¥è½»æ¾åœ¨æ–‡æ¡£ä¸­åˆ›å»ºäº¤äº’å¼ç»„ä»¶ï¼Œä¾‹å¦‚ä½¿ç”¨æ ‡ç­¾é¡µç»„ä»¶å±•ç¤ºå¤šç§ç¼–ç¨‹è¯­è¨€çš„ä»£ç å¹¶å®ç°åˆ‡æ¢ã€‚

æˆ‘ä»¬æ²¡æœ‰ä¸ºå¤šè¯­è¨€ä»£ç å—å®ç°ä¸“ç”¨ç»„ä»¶ï¼Œè€Œæ˜¯åœ¨ç»å…¸ä¸»é¢˜ä¸­å¼€å‘äº†é€šç”¨[`<Tabs>`](./markdown-features-tabs.mdx)ç»„ä»¶ï¼Œä»¥ä¾¿æ‚¨ä¹Ÿèƒ½å°†å…¶ç”¨äºå…¶ä»–éä»£ç åœºæ™¯ã€‚

ä»¥ä¸‹ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨æ–‡æ¡£ä¸­å®ç°å¤šè¯­è¨€ä»£ç é€‰é¡¹å¡ã€‚è¯·æ³¨æ„æ¯ä¸ªè¯­è¨€å—ä¸Šæ–¹å’Œä¸‹æ–¹çš„ç©ºè¡Œæ˜¯**æœ‰æ„ä¿ç•™çš„**ã€‚è¿™æ˜¯[MDXå½“å‰çš„é™åˆ¶](./markdown-features-react.mdx#markdown-and-jsx-interoperability)ï¼šå¿…é¡»åœ¨Markdownè¯­æ³•å‘¨å›´ä¿ç•™ç©ºè¡Œï¼ŒMDXè§£æå™¨æ‰èƒ½è¯†åˆ«è¿™æ˜¯Markdownè¯­æ³•è€ŒéJSXã€‚

````jsx
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
<TabItem value="js" label="JavaScript">

```js
function helloWorld() {
  console.log('Hello, world!');
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>
````

æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š

<BrowserWindow>
<Tabs>
<TabItem value="js" label="JavaScript">

```js
function helloWorld() {
  console.log('Hello, world!');
}
```

</TabItem>
<TabItem value="py" label="Python">

```py
def hello_world():
  print("Hello, world!")
```

</TabItem>
<TabItem value="java" label="Java">

```java
class HelloWorld {
  public static void main(String args[]) {
    System.out.println("Hello, World");
  }
}
```

</TabItem>
</Tabs>
</BrowserWindow>

å¦‚æœå­˜åœ¨å¤šä¸ªå¤šè¯­è¨€ä»£ç é€‰é¡¹å¡ï¼Œä¸”éœ€è¦åŒæ­¥ä¸åŒé€‰é¡¹å¡å®ä¾‹é—´çš„é€‰æ‹©çŠ¶æ€ï¼Œè¯·å‚è€ƒ[åŒæ­¥é€‰é¡¹å¡é€‰æ‹©ç« èŠ‚](markdown-features-tabs.mdx#syncing-tab-choices)ã€‚

### Docusaurus npm2yarn remarkæ’ä»¶ {#npm2yarn-remark-plugin}

åŒæ—¶å±•ç¤ºnpmå’ŒYarnçš„CLIå‘½ä»¤æ˜¯å¸¸è§éœ€æ±‚ï¼Œä¾‹å¦‚ï¼š

```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```

Docusauruså†…ç½®äº†æ­¤åŠŸèƒ½ï¼Œæ— éœ€æ¯æ¬¡ä½¿ç”¨`Tabs`ç»„ä»¶ã€‚å¯ç”¨è¯¥åŠŸèƒ½éœ€å…ˆå®‰è£…`@docusaurus/remark-plugin-npm2yarn`åŒ…ï¼Œç„¶ååœ¨`docusaurus.config.js`ä¸­ä¸ºéœ€è¦æ­¤åŠŸèƒ½çš„æ’ä»¶ï¼ˆæ–‡æ¡£ã€åšå®¢ã€é¡µé¢ç­‰ï¼‰åœ¨`remarkPlugins`é€‰é¡¹ä¸­æ³¨å†Œã€‚ï¼ˆé…ç½®æ ¼å¼è¯¦è§[æ–‡æ¡£é…ç½®](../../api/plugins/plugin-content-docs.mdx#ex-config)ï¼‰

```js title="docusaurus.config.js"
module.exports = {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          // highlight-start
          remarkPlugins: [
            [require('@docusaurus/remark-plugin-npm2yarn'), {sync: true}],
          ],
          // highlight-end
        },
        pages: {
          // highlight-next-line
          remarkPlugins: [require('@docusaurus/remark-plugin-npm2yarn')],
        },
        blog: {
          // highlight-start
          remarkPlugins: [
            [
              require('@docusaurus/remark-plugin-npm2yarn'),
              {converters: ['pnpm']},
            ],
          ],
          // highlight-end
          // ...
        },
      },
    ],
  ],
};
```

ä½¿ç”¨æ—¶åœ¨ä»£ç å—æ·»åŠ `npm2yarn`é”®ï¼š

````md
```bash npm2yarn
npm install @docusaurus/remark-plugin-npm2yarn
```
````

#### é…ç½®é¡¹ {#npm2yarn-remark-plugin-configuration}

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `sync` | `boolean` | `false` | Whether to sync the selected converter across all code blocks. |
| `converters` | `array` | `'yarn'`, `'pnpm'` | The list of converters to use. The order of the converters is important, as the first converter will be used as the default choice. |

## åœ¨JSXä¸­ä½¿ç”¨ {#usage-in-jsx}

åœ¨Markdownä¹‹å¤–ï¼Œå¯ä½¿ç”¨`@theme/CodeBlock`ç»„ä»¶è·å¾—ç›¸åŒè¾“å‡ºæ•ˆæœã€‚

```jsx
import CodeBlock from '@theme/CodeBlock';

export default function MyReactPage() {
  return (
    <div>
      {/* highlight-start */}
      <CodeBlock
        language="jsx"
        title="/src/components/HelloCodeTitle.js"
        showLineNumbers>
        {`function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}`}
      </CodeBlock>
      {/* highlight-end */}
    </div>
  );
}
```

<BrowserWindow>
  <CodeBlock
    language="jsx"
    title="/src/components/HelloCodeTitle.js"
    showLineNumbers>
    {`function HelloCodeTitle(props) {
  return <h1>Hello, {props.name}</h1>;
}`}
  </CodeBlock>
</BrowserWindow>

æ¥å—çš„propsåŒ…æ‹¬`language`ã€`title`å’Œ`showLineNumbers`ï¼Œä¸Markdownä»£ç å—çš„å†™æ³•ä¸€è‡´ã€‚

è™½ç„¶ä¸æ¨èï¼Œä½†ä¹Ÿå¯ä¼ é€’`metastring`å±æ€§å¦‚`metastring='{1-2} title="/src/components/HelloCodeTitle.js" showLineNumbers'`ï¼Œè¿™æ˜¯Markdownä»£ç å—çš„åº•å±‚å®ç°æ–¹å¼ã€‚ä½†æˆ‘ä»¬å»ºè®®[ä½¿ç”¨æ³¨é‡Šå®ç°è¡Œé«˜äº®](#highlighting-with-comments)ã€‚

å¦‚å‰æ–‡[æ‰€è¿°](#using-jsx-markup)ï¼Œè¯­æ³•é«˜äº®ä»…åœ¨å­å†…å®¹ä¸ºçº¯å­—ç¬¦ä¸²æ—¶ç”Ÿæ•ˆã€‚