---
keywords:
  - algolia
  - search
---

# æœç´¢

æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼ä¸ºç½‘ç«™æ·»åŠ æœç´¢åŠŸèƒ½ï¼š

- ğŸ¥‡ [Algolia DocSearch](#using-algolia-docsearch)ï¼ˆ**å®˜æ–¹æ”¯æŒ**ï¼‰
- ğŸ‘¥ [Typesense DocSearch](#using-typesense-docsearch)
- ğŸ‘¥ [æœ¬åœ°æœç´¢](#using-local-search)
- ğŸ‘¥ [è‡ªå®šä¹‰ `SearchBar` ç»„ä»¶](#using-your-own-search)

:::info

ğŸ¥‡ Docusaurus ä¸º [Algolia DocSearch](#using-algolia-docsearch) æä¾›**ä¸€çº§æ”¯æŒ**ã€‚

ğŸ‘¥ å…¶ä»–é€‰é¡¹ç”±**ç¤¾åŒºç»´æŠ¤**ï¼šç›¸å…³é—®é¢˜è¯·æäº¤è‡³å„è‡ªä»£ç ä»“åº“ã€‚

:::

## ğŸ¥‡ ä½¿ç”¨ Algolia DocSearch {#using-algolia-docsearch}

Docusaurus **å®˜æ–¹æ”¯æŒ** [Algolia DocSearch](https://docsearch.algolia.com) æœåŠ¡ã€‚

è¯¥æœåŠ¡å¯¹æ‰€æœ‰å¼€æºé¡¹ç›®**å…è´¹**ï¼šè¯·ç¡®ä¿é˜…è¯»[å‡†å…¥æ¸…å•](https://docsearch.algolia.com/docs/who-can-apply/)å¹¶[ç”³è¯·åŠ å…¥ DocSearch è®¡åˆ’](https://docsearch.algolia.com/apply)ã€‚

DocSearch æ¯å‘¨ä¼šçˆ¬å–æ‚¨çš„ç½‘ç«™ä¸€æ¬¡ï¼ˆå¯é€šè¿‡ç½‘é¡µç•Œé¢é…ç½®é¢‘ç‡ï¼‰ï¼Œå°†æ‰€æœ‰å†…å®¹èšåˆåˆ° Algolia ç´¢å¼•ä¸­ã€‚è¿™äº›å†…å®¹éšåé€šè¿‡ Algolia API ç›´æ¥ä»æ‚¨çš„å‰ç«¯è¿›è¡ŒæŸ¥è¯¢ã€‚

å¦‚æœæ‚¨çš„ç½‘ç«™[ä¸ç¬¦åˆ](https://docsearch.algolia.com/docs/who-can-apply)å…è´¹æ‰˜ç®¡ç‰ˆ DocSearch çš„å‡†å…¥æ¡ä»¶ï¼Œæˆ–ç½‘ç«™éƒ¨ç½²åœ¨é˜²ç«å¢™åéå…¬å¼€è®¿é—®ï¼Œæ‚¨å¯ä»¥[è‡ªè¡Œè¿è¡Œ](https://docsearch.algolia.com/docs/run-your-own/) DocSearch çˆ¬è™«ã€‚

:::note

é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocusaurus é¢„è®¾ä¼šç”Ÿæˆå¯ä¾› Algolia çˆ¬è™«ä½¿ç”¨çš„ [sitemap.xml](https://docusaurus.io/sitemap.xml)ã€‚

:::

:::info[ä»æ—§ç‰ˆ docsearch è¿ç§»ï¼Ÿ]

å…³äºä»æ—§ç‰ˆ DocSearch åŸºç¡€è®¾æ–½è¿ç§»çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»[æˆ‘ä»¬çš„åšå®¢æ–‡ç« ](/blog/2021/11/21/algolia-docsearch-migration)æˆ– [DocSearch è¿ç§»æ–‡æ¡£](https://docsearch.algolia.com/docs/migrating-from-legacy)ã€‚

:::

### ç´¢å¼•é…ç½® {#algolia-index-configuration}

å½“æ‚¨çš„ç”³è¯·é€šè¿‡å¹¶éƒ¨ç½²åï¼Œæ‚¨å°†æ”¶åˆ°åŒ…å«æ‰€æœ‰é…ç½®è¯¦æƒ…çš„é‚®ä»¶ã€‚æ‚¨å¯ä»¥é€šè¿‡[ç½‘é¡µç•Œé¢](https://crawler.algolia.com/)ç¼–è¾‘å’Œç®¡ç†çˆ¬å–ä»»åŠ¡ã€‚ç´¢å¼•åœ¨éƒ¨ç½²åç«‹å³å¯ç”¨ï¼Œé€šå¸¸æ— éœ€æ‰‹åŠ¨é…ç½®ã€‚

:::tip

å¼ºçƒˆå»ºè®®ä½¿ç”¨ç±»ä¼¼äº [**Docusaurus 2 å®˜ç½‘é…ç½®**](https://docsearch.algolia.com/docs/templates/#docusaurus-v2-template) çš„æ–¹æ¡ˆã€‚

:::

### è¿æ¥ Algolia {#connecting-algolia}

Docusaurus è‡ªå¸¦çš„ `@docusaurus/preset-classic` æ”¯æŒ Algolia DocSearch é›†æˆã€‚å¦‚æœæ‚¨ä½¿ç”¨ç»å…¸é¢„è®¾ï¼Œåˆ™æ— éœ€é¢å¤–å®‰è£…ã€‚

<details>
<summary>Installation steps when not using <code>@docusaurus/preset-classic</code></summary>

1. Install the package:

```bash npm2yarn
npm install --save @docusaurus/theme-search-algolia
```

2. Register the theme in `docusaurus.config.js`:

```js title="docusaurus.config.js"
module.exports = {
  title: 'My site',
  // ...
  themes: ['@docusaurus/theme-search-algolia'],
  themeConfig: {
    // ...
  },
};
```

</details>

ç„¶ååœ¨ `themeConfig` ä¸­æ·»åŠ  `algolia` å­—æ®µã€‚[ç”³è¯· DocSearch](https://docsearch.algolia.com/apply/) ä»¥è·å– Algolia ç´¢å¼•å’Œ API å¯†é’¥ã€‚

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      // The application ID provided by Algolia
      appId: 'YOUR_APP_ID',

      // Public API key: it is safe to commit it
      apiKey: 'YOUR_SEARCH_API_KEY',

      indexName: 'YOUR_INDEX_NAME',

      // Optional: see doc section below
      contextualSearch: true,

      // Optional: Specify domains where the navigation should occur through window.location instead on history.push. Useful when our Algolia config crawls multiple documentation sites and we want to navigate with window.location.href to them.
      externalUrlRegex: 'external\\.com|domain\\.com',

      // Optional: Replace parts of the item URLs from Algolia. Useful when using the same search index for multiple deployments using a different baseUrl. You can use regexp or string in the `from` param. For example: localhost:3000 vs myCompany.com/docs
      replaceSearchResultPathname: {
        from: '/docs/', // or as RegExp: /\/docs\//
        to: '/',
      },

      // Optional: Algolia search parameters
      searchParameters: {},

      // Optional: path for search page that enabled by default (`false` to disable it)
      searchPagePath: 'search',

      // Optional: whether the insights feature is enabled or not on Docsearch (`false` by default)
      insights: false,

      //... other Algolia params
    },
    // highlight-end
  },
};
```

:::info

åœ¨ Docusaurus v1 ä¸­ï¼Œ`searchParameters` é€‰é¡¹æ›¾å‘½åä¸º `algoliaOptions`ã€‚

å…·ä½“å¯ç”¨å€¼è¯·å‚é˜…å…¶[å®˜æ–¹ DocSearch æ–‡æ¡£](https://docsearch.algolia.com/docs/api#searchparameters)ã€‚

:::

:::warning

åœ¨ Algolia çˆ¬å–æ‚¨çš„ç½‘ç«™ä¹‹å‰ï¼Œæœç´¢åŠŸèƒ½å¯èƒ½æ— æ³•ç¨³å®šå·¥ä½œã€‚

å¦‚æœé‡å¤§å˜æ›´åæœç´¢å¤±æ•ˆï¼Œè¯·é€šè¿‡ Algolia æ§åˆ¶å°**è§¦å‘é‡æ–°çˆ¬å–**ã€‚

:::

### ä¸Šä¸‹æ–‡æœç´¢ {#contextual-search}

ä¸Šä¸‹æ–‡æœç´¢åŠŸèƒ½**é»˜è®¤å¯ç”¨**ã€‚

å®ƒèƒ½ç¡®ä¿æœç´¢ç»“æœ**ä¸å½“å‰è¯­è¨€å’Œç‰ˆæœ¬ç›¸å…³**ã€‚

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: true,
    },
    // highlight-end
  },
};
```

å‡è®¾æ‚¨æœ‰ä¸¤ä¸ªæ–‡æ¡£ç‰ˆæœ¬ï¼ˆ**v1**å’Œ**v2**ï¼‰å’Œä¸¤ç§è¯­è¨€ï¼ˆ`en`å’Œ`fr`ï¼‰ã€‚

å½“æµè§ˆv2æ–‡æ¡£æ—¶ï¼Œè¿”å›v1æ–‡æ¡£çš„æœç´¢ç»“æœä¼šæ˜¾å¾—ä¸åˆé€»è¾‘ã€‚æœ‰æ—¶v1å’Œv2æ–‡æ¡£å†…å®¹é«˜åº¦ç›¸ä¼¼ï¼Œè¿™ä¼šå¯¼è‡´åŒä¸€æŸ¥è¯¢è¿”å›é‡å¤ç»“æœï¼ˆæ¯ä¸ªç‰ˆæœ¬å„å‡ºç°ä¸€æ¬¡ï¼‰ã€‚

åŒç†ï¼Œåœ¨æµè§ˆæ³•è¯­ç«™ç‚¹æ—¶ï¼Œè¿”å›è‹±æ–‡æ–‡æ¡£çš„æœç´¢ç»“æœä¹Ÿä¸åˆç†ã€‚

ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œä¸Šä¸‹æ–‡æœç´¢åŠŸèƒ½ä¼šè¯†åˆ«æ‚¨å½“å‰æµè§ˆçš„æ–‡æ¡£ç‰ˆæœ¬å’Œè¯­è¨€ï¼Œå¹¶åŠ¨æ€ç”Ÿæˆæœç´¢æŸ¥è¯¢è¿‡æ»¤å™¨ã€‚

- åœ¨`/en/docs/v1/myDoc`è·¯å¾„ä¸‹ï¼Œæœç´¢ç»“æœå°†ä»…åŒ…å«**v1ç‰ˆæœ¬è‹±æ–‡æ–‡æ¡£**ï¼ˆä»¥åŠæœªç‰ˆæœ¬åŒ–çš„å…¶ä»–é¡µé¢ï¼‰
- åœ¨`/fr/docs/v2/myDoc`è·¯å¾„ä¸‹ï¼Œæœç´¢ç»“æœå°†ä»…åŒ…å«**v2ç‰ˆæœ¬æ³•è¯­æ–‡æ¡£**ï¼ˆä»¥åŠæœªç‰ˆæœ¬åŒ–çš„å…¶ä»–é¡µé¢ï¼‰

:::info

å½“å¯ç”¨`contextualSearch: true`ï¼ˆé»˜è®¤å€¼ï¼‰æ—¶ï¼Œä¸Šä¸‹æ–‡åˆ†é¢è¿‡æ»¤å™¨ä¼šä¸`algolia.searchParameters.facetFilters`æä¾›çš„è¿‡æ»¤å™¨åˆå¹¶ã€‚

å¦‚éœ€ç‰¹æ®Šé…ç½®ï¼Œå¯ç¦ç”¨`contextualSearch`å¹¶è‡ªå®šä¹‰`facetFilters`ï¼š

```js title="docusaurus.config.js"
module.exports = {
  // ...
  themeConfig: {
    // ...
    // highlight-start
    algolia: {
      contextualSearch: false,
      searchParameters: {
        facetFilters: ['language:en', ['filter1', 'filter2'], 'filter3'],
      },
    },
    // highlight-end
  },
};
```

å…·ä½“é…ç½®è¯·å‚è€ƒ[Algoliaåˆ†é¢æœç´¢æ–‡æ¡£](https://www.algolia.com/doc/guides/managing-results/refine-results/faceting/)ã€‚

:::

### è‡ªå®šä¹‰Algoliaæœç´¢æ ·å¼ {#styling-your-algolia-search}

DocSearché»˜è®¤é‡‡ç”¨ç»è¿‡ç²¾å¿ƒè°ƒæ ¡çš„ä¸»é¢˜ï¼Œè¯¥ä¸»é¢˜ä¸“ä¸ºæ— éšœç¢è®¿é—®è®¾è®¡ï¼Œç¡®ä¿è‰²å½©å’Œå¯¹æ¯”åº¦ç¬¦åˆæ ‡å‡†ã€‚

æ‚¨ä»å¯é€šè¿‡ç¼–è¾‘`/src/css/custom.css`æ–‡ä»¶ï¼Œä½¿ç”¨Docusaurusæä¾›çš„[Infima CSSå˜é‡](styling-layout.mdx#styling-your-site-with-infima)æ¥å®šåˆ¶DocSearchæ ·å¼ã€‚

```css title="/src/css/custom.css"
[data-theme='light'] .DocSearch {
  /* --docsearch-primary-color: var(--ifm-color-primary); */
  /* --docsearch-text-color: var(--ifm-font-color-base); */
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(94, 100, 112, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-color-secondary-lighter);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-color-secondary);
  --docsearch-searchbox-focus-background: var(--ifm-color-white);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-white);
  /* Footer */
  --docsearch-footer-background: var(--ifm-color-white);
}

[data-theme='dark'] .DocSearch {
  --docsearch-text-color: var(--ifm-font-color-base);
  --docsearch-muted-color: var(--ifm-color-secondary-darkest);
  --docsearch-container-background: rgba(47, 55, 69, 0.7);
  /* Modal */
  --docsearch-modal-background: var(--ifm-background-color);
  /* Search box */
  --docsearch-searchbox-background: var(--ifm-background-color);
  --docsearch-searchbox-focus-background: var(--ifm-color-black);
  /* Hit */
  --docsearch-hit-color: var(--ifm-font-color-base);
  --docsearch-hit-active-color: var(--ifm-color-white);
  --docsearch-hit-background: var(--ifm-color-emphasis-100);
  /* Footer */
  --docsearch-footer-background: var(--ifm-background-surface-color);
  --docsearch-key-gradient: linear-gradient(
    -26.5deg,
    var(--ifm-color-emphasis-200) 0%,
    var(--ifm-color-emphasis-100) 100%
  );
}
```

### å®šåˆ¶Algoliaæœç´¢è¡Œä¸º {#customizing-the-algolia-search-behavior}

Algolia DocSearchæ”¯æŒé€šè¿‡`docusaurus.config.js`æ–‡ä»¶ä¸­çš„`algolia`å­—æ®µä¼ é€’[é…ç½®é€‰é¡¹](https://docsearch.algolia.com/docs/api/)ã€‚

```js title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    // ...
    algolia: {
      apiKey: 'YOUR_API_KEY',
      indexName: 'YOUR_INDEX_NAME',
      // Options...
    },
  },
};
```

### ä¿®æ”¹Algoliaæœç´¢ç»„ä»¶ {#editing-the-algolia-search-component}

å¦‚éœ€ç¼–è¾‘Algoliaæœç´¢çš„Reactç»„ä»¶ï¼Œå¯é€šè¿‡[ç½®æ¢(swizzle)](swizzling.mdx)åŠŸèƒ½ä¿®æ”¹`@docusaurus/theme-search-algolia`ä¸­çš„`SearchBar`ç»„ä»¶ï¼š

```bash npm2yarn
npm run swizzle @docusaurus/theme-search-algolia SearchBar
```

### æŠ€æœ¯æ”¯æŒ {#algolia-support}

Algolia DocSearchå›¢é˜Ÿå¯ååŠ©è§£å†³ç½‘ç«™æœç´¢ç›¸å…³é—®é¢˜ã€‚

æ‚¨å¯é€šè¿‡[é‚®ä»¶](mailto:documentationsearch@algolia.com)æˆ–[Discord](https://discord.gg/tXdr5mP)è”ç³»ä»–ä»¬ã€‚

Docusauruså®˜æ–¹[Discord](https://discordapp.com/invite/docusaurus)ä¹Ÿè®¾æœ‰`#algolia`é¢‘é“ã€‚

## ğŸ‘¥ ä½¿ç”¨Typesense DocSearch {#using-typesense-docsearch}

[Typesense](https://typesense.org) DocSearchçš„å·¥ä½œåŸç†ä¸Algolia DocSearchç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºç½‘ç«™å†…å®¹å°†è¢«ç´¢å¼•åˆ°Typesenseæœç´¢é›†ç¾¤ä¸­ã€‚

Typesense æ˜¯ä¸€ä¸ª[å¼€æº](https://github.com/typesense/typesense)çš„å³æ—¶æœç´¢å¼•æ“ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ï¼š

- åœ¨è‡ªæœ‰æœåŠ¡å™¨ä¸Š[è‡ªä¸»æ‰˜ç®¡](https://typesense.org/docs/latest/guide/install-typesense.html#option-2-local-machine-self-hosting)
- æˆ–ä½¿ç”¨æ‰˜ç®¡çš„ [Typesense Cloud](https://cloud.typesense.org) æœåŠ¡

ä¸ Algolia DocSearch ç±»ä¼¼ï¼Œè¯¥ç³»ç»ŸåŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼š

- [typesense-docsearch-scraper](https://github.com/typesense/typesense-docsearch-scraper) â€”â€” ç”¨äºæŠ“å–ç½‘ç«™å†…å®¹å¹¶å°†æ•°æ®ç´¢å¼•è‡³æ‚¨çš„ Typesense é›†ç¾¤
- [docusaurus-theme-search-typesense](https://github.com/typesense/docusaurus-theme-search-typesense) â€”â€” å¯é›†æˆåˆ°ç½‘ç«™çš„æœç´¢æ  UI ç»„ä»¶

è¯·å‚é˜…é€æ­¥æŒ‡å—äº†è§£å¦‚ä½•[è¿è¡Œ typesense-docsearch-scraper](https://typesense.org/docs/latest/guide/docsearch.html#step-1-set-up-docsearch-scraper)ï¼Œä»¥åŠå¦‚ä½•[åœ¨ Docusaurus ç«™ç‚¹å®‰è£…æœç´¢æ ](https://typesense.org/docs/latest/guide/docsearch.html#option-a-docusaurus-powered-sites)

## ğŸ‘¥ ä½¿ç”¨æœ¬åœ°æœç´¢ {#using-local-search}

å½“æœç´¢ç´¢å¼•è§„æ¨¡è¾ƒå°ä¸”å¯è¢«ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ä¸‹è½½è‡³æµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ¬åœ°æœç´¢æ’ä»¶

ç¤¾åŒºæ”¯æŒçš„[æœ¬åœ°æœç´¢æ’ä»¶åˆ—è¡¨å¯åœ¨æ­¤å¤„æŸ¥é˜…](https://docusaurus.io/community/resources#search)

## ğŸ‘¥ ä½¿ç”¨è‡ªå®šä¹‰æœç´¢ {#using-your-own-search}

è¦ä½¿ç”¨è‡ªå®šä¹‰æœç´¢ï¼Œè¯·ç½®æ¢ï¼ˆswizzleï¼‰`@docusaurus/theme-classic` ä¸­çš„ `SearchBar` ç»„ä»¶

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic SearchBar
```

è¿™å°†åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åˆ›å»º `src/themes/SearchBar` æ–‡ä»¶ã€‚é‡å¯å¼€å‘æœåŠ¡å™¨å¹¶ç¼–è¾‘è¯¥ç»„ä»¶åï¼Œæ‚¨ä¼šå‘ç° Docusaurus å·²å¼€å§‹ä½¿ç”¨æ‚¨è‡ªå®šä¹‰çš„ `SearchBar` ç»„ä»¶

**æ³¨æ„**ï¼šæ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©[ä» Algolia SearchBar å¼€å§‹ç½®æ¢](#editing-the-algolia-search-component)ï¼Œå¹¶åŸºäºæ­¤åˆ›å»ºè‡ªå·±çš„æœç´¢ç»„ä»¶