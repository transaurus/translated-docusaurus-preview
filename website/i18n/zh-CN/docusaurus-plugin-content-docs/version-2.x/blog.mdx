---
description: Deploy a full-featured blog in no time with Docusaurus.
---

# 博客

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

博客功能可让您快速部署功能完整的博客系统。

:::info

完整配置选项请查阅[博客插件API参考文档](./api/plugins/plugin-content-blog.mdx)。

:::

## 初始设置 {#initial-setup}

首先创建`blog`目录来搭建博客。

然后在`docusaurus.config.js`中添加博客导航链接：

```js title="docusaurus.config.js"
module.exports = {
  themeConfig: {
    // ...
    navbar: {
      items: [
        // ...
        // highlight-next-line
        {to: 'blog', label: 'Blog', position: 'left'}, // or position: 'right'
      ],
    },
  },
};
```

## 添加文章 {#adding-posts}

在博客目录下创建Markdown文件即可发布文章。

例如创建文件`website/blog/2019-09-05-hello-docusaurus-v2.md`：

```md title="website/blog/2019-09-05-hello-docusaurus-v2.md"
---
title: Welcome Docusaurus v2
description: This is my first post on Docusaurus 2.
slug: welcome-docusaurus-v2
authors:
  - name: Joel Marcey
    title: Co-creator of Docusaurus 1
    url: https://github.com/JoelMarcey
    image_url: https://github.com/JoelMarcey.png
  - name: Sébastien Lorber
    title: Docusaurus maintainer
    url: https://sebastienlorber.com
    image_url: https://github.com/slorber.png
tags: [hello, docusaurus-v2]
image: https://i.imgur.com/mErPwqL.png
hide_table_of_contents: false
---

Welcome to this blog. This blog is created with [**Docusaurus 2**](https://docusaurus.io/).

<!--truncate-->

This is my first post on Docusaurus 2.

A whole bunch of exploration to follow.
```

[Front Matter](./guides/markdown-features/markdown-features-intro.mdx#front-matter)可用于添加作者信息等元数据，但Docusaurus也能自动推断必要信息。完整字段说明参见[API文档](api/plugins/plugin-content-blog.mdx#markdown-front-matter)。

## 博客列表 {#blog-list}

博客首页(默认路径为`/blog`)即_博客列表页_，集中展示所有文章。

在文章中使用`<!--truncate-->`标记来定义摘要内容。该标记前的所有内容将作为摘要显示，且必须是独立可渲染的Markdown。例如：

```md
---
title: Truncation Example
---

All these will be part of the blog post summary.

Even this.

<!--truncate-->

But anything from here on down will not be.

Not this.

Or this.
```

默认每页显示10篇文章，可通过插件配置中的`postsPerPage`调整分页。设为`postsPerPage: 'ALL'`将禁用分页并展示所有文章。还可添加meta描述优化SEO：

```js title="docusaurus.config.js"
module.exports = {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          // highlight-start
          blogTitle: 'Docusaurus blog!',
          blogDescription: 'A Docusaurus powered blog!',
          postsPerPage: 'ALL',
          // highlight-end
        },
      },
    ],
  ],
};
```

## 博客侧边栏 {#blog-sidebar}

侧边栏默认展示5篇最新文章，通过`blogSidebarCount`可调整数量。设为`0`将完全移除侧边栏容器以增加主内容区宽度。特殊值`'ALL'`会展示_所有_文章。

可通过`blogSidebarTitle`修改侧边栏标题。例如当使用`blogSidebarCount: 'ALL'`时，可将默认的"最新文章"改为"全部文章"：

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          // highlight-start
          blogSidebarTitle: 'All posts',
          blogSidebarCount: 'ALL',
          // highlight-end
        },
      },
    ],
  ],
};
```

## 文章日期 {#blog-post-date}

Docusaurus会从`YYYY-MM-DD-文章标题.md`这类文件名中提取`YYYY-MM-DD`格式的日期。

<details>
<summary>Example supported patterns</summary>

| Pattern | Example |
| --- | --- |
| Single file | `2021-05-28-my-blog-post-title.md` |
| MDX file | `2021-05-28-my-blog-post-title.mdx` |
| Single folder + `index.md` | `2021-05-28-my-blog-post-title/index.md` |
| Folder named by date | `2021-05-28/my-blog-post-title.md` |
| Nested folders by date | `2021/05/28/my-blog-post-title.md` |
| Partially nested folders by date | `2021/05-28-my-blog-post-title.md` |
| Nested folders + `index.md` | `2021/05/28/my-blog-post-title/index.md` |
| Date in the middle of path | `category/2021/05-28-my-blog-post-title.md` |

The date will be excised from the path and appended to the beginning of the URL slug.

</details>

:::tip

使用文件夹便于将文章图片与Markdown文件存放在一起。

:::

此命名约定为可选，也可通过front matter指定日期。由于front matter支持YAML的datetime格式，当需要精确到发布时间时特别有用。例如同一天发布多篇文章时可按时间排序：

```md title="earlier-post.md"
---
date: 2021-09-13T10:00
---
```

```md title="later-post.md"
---
date: 2021-09-13T18:00
---
```

## 文章作者 {#blog-post-authors}

使用 `authors` 前导字段声明博客文章作者。作者至少需包含 `name` 或 `image_url` 属性。Docusaurus 会使用 `url`、`email` 和 `title` 等信息，但也允许添加其他自定义信息。

### 内联作者声明 {#inline-authors}

博客文章作者可直接在前导字段中声明：

<Tabs groupId="author-front-matter">
<TabItem value="single" label="Single author">

```md title="my-blog-post.md"
---
authors:
  name: Joel Marcey
  title: Co-creator of Docusaurus 1
  url: https://github.com/JoelMarcey
  image_url: https://github.com/JoelMarcey.png
  email: jimarcey@gmail.com
---
```

</TabItem>
<TabItem value="multiple" label="Multiple authors">

```md title="my-blog-post.md"
---
authors:
  - name: Joel Marcey
    title: Co-creator of Docusaurus 1
    url: https://github.com/JoelMarcey
    image_url: https://github.com/JoelMarcey.png
    email: jimarcey@gmail.com
  - name: Sébastien Lorber
    title: Docusaurus maintainer
    url: https://sebastienlorber.com
    image_url: https://github.com/slorber.png
---
```

</TabItem>
</Tabs>

:::tip

此方式最适合快速上手，或用于临时性、非固定作者。

:::

:::info

推荐使用 `authors` 前导字段，但旧版 `author_*` 前导字段仍受支持：

```md title="my-blog-post.md"
---
author: Joel Marcey
author_title: Docusaurus 1 联合创始人
author_url: https://github.com/JoelMarcey
author_image_url: https://github.com/JoelMarcey.png
---
```

:::

### 全局作者配置 {#global-authors}

对于固定供稿作者，若在每篇博文中维护作者信息会非常繁琐。

可通过配置文件全局声明这些作者：

```yml title="website/blog/authors.yml"
jmarcey:
  name: Joel Marcey
  title: Co-creator of Docusaurus 1
  url: https://github.com/JoelMarcey
  image_url: https://github.com/JoelMarcey.png
  email: jimarcey@gmail.com

slorber:
  name: Sébastien Lorber
  title: Docusaurus maintainer
  url: https://sebastienlorber.com
  image_url: https://github.com/slorber.png
```

:::tip

使用 `authorsMapPath` 插件选项配置路径，也支持 JSON 格式。

:::

在博客文章前导字段中，可引用全局配置文件中声明的作者：

<Tabs groupId="author-front-matter">
<TabItem value="single" label="Single author">

```md title="my-blog-post.md"
---
authors: jmarcey
---
```

</TabItem>
<TabItem value="multiple" label="Multiple authors">

```md title="my-blog-post.md"
---
authors: [jmarcey, slorber]
---
```

</TabItem>
</Tabs>

:::info

`authors` 系统非常灵活，可满足更高级的用例：

<details>
  <summary>混合使用内联作者与全局作者</summary>

多数情况下使用全局作者，同时仍可内联声明作者：

```md title="my-blog-post.md"
---
authors:
  - jmarcey
  - slorber
  - name: 内联作者姓名
    title: 内联作者头衔
    url: https://github.com/inlineAuthor
    image_url: https://github.com/inlineAuthor
---
```

</details>

<details>
  <summary>局部覆盖全局作者配置</summary>

可针对单篇博客文章自定义全局作者数据：

```md title="my-blog-post.md"
---
authors:
  - key: jmarcey
    title: Joel Marcey 的新头衔
  - key: slorber
    name: Sébastien Lorber 的新名字
---
```

</details>

<details>
  <summary>本地化作者配置文件</summary>

配置文件支持本地化，只需在以下路径创建本地化副本：

```bash
website/i18n/[locale]/docusaurus-plugin-content-blog/authors.yml
```

</details>

:::

无论是通过前导字段还是作者映射表声明的作者，都必须包含姓名或头像（或两者兼备）。若某篇文章的所有作者均未设置姓名，Docusaurus 会以紧凑形式显示其头像。效果可参考[此测试文章](/tests/blog/2022/01/20/image-only-authors)。

:::warning[Feed 生成]

[RSS 订阅源](#feed)要求必须设置作者的 email 字段，否则作者不会出现在订阅源中。

:::

## 阅读时长 {#reading-time}

Docusaurus 会根据字数自动生成每篇博客文章的阅读时长预估。我们提供了自定义此功能的选项。

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          // highlight-start
          showReadingTime: true, // When set to false, the "x min read" won't be shown
          readingTime: ({content, frontMatter, defaultReadingTime}) =>
            defaultReadingTime({content, options: {wordsPerMinute: 300}}),
          // highlight-end
        },
      },
    ],
  ],
};
```

`readingTime` 回调函数接收三个参数：博客内容文本字符串、前导字段键值对记录，以及默认阅读时长计算函数。其返回值应为数字（阅读分钟数）或 `undefined`（禁用该页面的阅读时长显示）。

默认阅读时长计算函数支持额外选项：`wordsPerMinute`（数字类型，默认值 300）和 `wordBound`（字符串到布尔值的函数）。当传入 `wordBound` 的字符串应被视为单词边界时（默认为空格、制表符和换行符），该函数应返回 `true`。

:::tip

使用回调函数满足所有自定义需求：

<Tabs>
<TabItem value="disable-per-post" label="按文章禁用">

**单篇文章禁用阅读时间统计：**

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          showReadingTime: true,
          // highlight-start
          readingTime: ({content, frontMatter, defaultReadingTime}) =>
            frontMatter.hide_reading_time
              ? undefined
              : defaultReadingTime({content}),
          // highlight-end
        },
      },
    ],
  ],
};
```

使用方法：

```md "my-blog-post.md"
---
hide_reading_time: true
---

该页面将不再显示阅读时长统计！
```

</TabItem>
<TabItem value="passing-options" label="传递参数">

**向默认阅读时间函数传递选项：**

```js title="docusaurus.config.js"
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          // highlight-start
          readingTime: ({content, defaultReadingTime}) =>
            defaultReadingTime({content, options: {wordsPerMinute: 100}}),
          // highlight-end
        },
      },
    ],
  ],
};
```

</TabItem>
<TabItem value="using-custom-algo" label="自定义算法">

**使用自定义阅读时间算法：**

```js title="docusaurus.config.js"
const myReadingTime = require('./myReadingTime');

module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          // highlight-next-line
          readingTime: ({content}) => myReadingTime(content),
        },
      },
    ],
  ],
};
```

</TabItem>
</Tabs>

:::

## 订阅源 {#feed}

通过配置`feedOptions`可生成RSS/Atom/JSON订阅源。默认会生成RSS和Atom源，若需禁用订阅功能，请将`feedOptions.type`设为`null`。

```ts
type FeedType = 'rss' | 'atom' | 'json';

type BlogOptions = {
  feedOptions?: {
    type?: FeedType | 'all' | FeedType[] | null;
    title?: string;
    description?: string;
    copyright: string;
    language?: string; // possible values: http://www.w3.org/TR/REC-html40/struct/dirlang.html#langcodes
    /** Allow control over the construction of BlogFeedItems */
    createFeedItems?: (params: {
      blogPosts: BlogPost[];
      siteConfig: DocusaurusConfig;
      outDir: string;
      defaultCreateFeedItems: (params: {
        blogPosts: BlogPost[];
        siteConfig: DocusaurusConfig;
        outDir: string;
      }) => Promise<BlogFeedItem[]>;
    }) => Promise<BlogFeedItem[]>;
  };
};
```

使用示例：

```js title="docusaurus.config.js"
module.exports = {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        blog: {
          // highlight-start
          feedOptions: {
            type: 'all',
            copyright: `Copyright © ${new Date().getFullYear()} Facebook, Inc.`,
            createFeedItems: async (params) => {
              const {blogPosts, defaultCreateFeedItems, ...rest} = params;
              return defaultCreateFeedItems({
                // keep only the 10 most recent blog posts in the feed
                blogPosts: blogPosts.filter((item, index) => index < 10),
                ...rest,
              });
            },
          },
          // highlight-end
        },
      },
    ],
  ],
};
```

订阅源访问路径如下：

<Tabs>
<TabItem value="RSS">

```text
https://example.com/blog/rss.xml
```

</TabItem>
<TabItem value="Atom">

```text
https://example.com/blog/atom.xml
```

</TabItem>
<TabItem value="JSON">

```text
https://example.com/blog/feed.json
```

</TabItem>
</Tabs>

## 高级主题 {#advanced-topics}

### 纯博客模式 {#blog-only-mode}

您可以让博客文章列表页替代独立首页作为站点入口。将`routeBasePath`设为`'/'`后，博客将通过根路径`example.com/`提供服务，而非子路径`example.com/blog/`。

```js title="docusaurus.config.js"
module.exports = {
  // ...
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        // highlight-next-line
        docs: false, // Optional: disable the docs plugin
        blog: {
          // highlight-next-line
          routeBasePath: '/', // Serve the blog at the site's root
          /* other blog options */
        },
      },
    ],
  ],
};
```

:::warning

请务必删除现有的`./src/pages/index.js`首页文件，否则会出现两个文件映射到同一路由的情况！

:::

:::tip

对于仅需文档功能的用户，我们还提供"纯文档模式"。详细配置说明参见[纯文档模式](./guides/docs/docs-introduction.mdx)，该文档对`routeBasePath`参数有更详尽的解释。

:::

### 多博客系统 {#multiple-blogs}

经典主题默认假设站点仅包含一个博客，因此只内置单博客插件实例。若需在同一站点部署多个博客，您可以在`docusaurus.config.js`的`plugins`选项中添加额外博客插件。

为第二个博客设置专属的`routeBasePath`路由路径，注意需与首个博客路径不同以避免冲突。同时通过`path`参数指定第二个博客的Markdown文件目录路径。

如[多实例插件文档](./using-plugins.mdx#multi-instance-plugins-and-plugin-ids)所述，您需要为各插件分配唯一ID。

```js title="docusaurus.config.js"
module.exports = {
  // ...
  plugins: [
    [
      '@docusaurus/plugin-content-blog',
      {
        /**
         * Required for any multi-instance plugin
         */
        id: 'second-blog',
        /**
         * URL route for the blog section of your site.
         * *DO NOT* include a trailing slash.
         */
        routeBasePath: 'my-second-blog',
        /**
         * Path to data on filesystem relative to site dir.
         */
        path: './my-second-blog',
      },
    ],
  ],
};
```

实际案例可参考我们部署的[第二个测试博客](/tests/blog)。