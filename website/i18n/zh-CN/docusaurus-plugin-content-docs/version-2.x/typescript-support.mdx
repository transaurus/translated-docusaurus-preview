---
description: Docusaurus is written in TypeScript and provides first-class TypeScript support.
---

# TypeScript 支持

Docusaurus 采用 TypeScript 编写，并提供一流的 TypeScript 支持。

## 初始化 {#initialization}

Docusaurus 支持编写和使用 TypeScript 主题组件。若初始化模板提供 TypeScript 变体，您可直接通过 `--typescript` 标志初始化一个具备完整 TypeScript 支持的站点。

```bash
npx create-docusaurus@latest my-website classic --typescript
```

以下是关于如何将现有项目迁移至 TypeScript 的指南。

## 配置 {#setup}

要开始使用 TypeScript，请将 `@docusaurus/module-type-aliases` 和基础 TS 配置添加到项目中：

```bash npm2yarn
npm install --save-dev typescript @docusaurus/module-type-aliases @tsconfig/docusaurus
```

然后在项目根目录添加包含以下内容的 `tsconfig.json`：

```json title="tsconfig.json"
{
  "extends": "@tsconfig/docusaurus/tsconfig.json",
  "compilerOptions": {
    "baseUrl": "."
  }
}
```

Docusaurus 不会使用此 `tsconfig.json` 编译项目。添加该文件仅用于提升编辑器体验，但您可以选择自行运行 `tsc` 或在 CI 上对代码进行类型检查。

现在您可以开始编写 TypeScript 主题组件。

## 配置文件类型标注 {#typing-config}

除非自行将 TypeScript 配置文件编译为 JavaScript，否则**无法**在 Docusaurus 中使用 TypeScript 配置文件。

我们推荐使用 [JSDoc 类型标注](https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html)：

```js title="docusaurus.config.js"
// highlight-next-line
// @ts-check

// highlight-next-line
/** @type {import('@docusaurus/types').Plugin} */
function MyPlugin(context, options) {
  return {
    name: 'my-plugin',
  };
}

// highlight-next-line
/** @type {import('@docusaurus/types').Config} */
const config = {
  title: 'Docusaurus',
  tagline: 'Build optimized websites quickly, focus on your content',
  organizationName: 'facebook',
  projectName: 'docusaurus',
  plugins: [MyPlugin],
  presets: [
    [
      '@docusaurus/preset-classic',
      // highlight-next-line
      /** @type {import('@docusaurus/preset-classic').Options} */
      ({
        docs: {
          path: 'docs',
          sidebarPath: 'sidebars.js',
        },
        blog: {
          path: 'blog',
          postsPerPage: 5,
        },
      }),
    ],
  ],
  themeConfig:
    // highlight-next-line
    /** @type {import('@docusaurus/preset-classic').ThemeConfig} */
    ({
      colorMode: {
        defaultMode: 'dark',
      },
      navbar: {
        hideOnScroll: true,
        title: 'Docusaurus',
        logo: {
          alt: 'Docusaurus Logo',
          src: 'img/docusaurus.svg',
          srcDark: 'img/docusaurus_keytar.svg',
        },
      },
    }),
};

module.exports = config;
```

:::tip

类型标注非常实用，可帮助您的 IDE 理解配置对象的类型！

最佳 IDE（VS Code、WebStorm、IntelliJ...）将提供出色的自动补全体验。

:::

:::info

默认情况下，Docusaurus 的 TypeScript 配置不会对 JavaScript 文件进行类型检查。

`// @ts-check` 注释可确保运行 `npx tsc` 时正确对配置文件进行类型检查。

:::

## 替换 TypeScript 主题组件 {#swizzling-typescript-theme-components}

对于支持 TypeScript 主题组件的主题，您可以在 `swizzle` 命令末尾添加 `--typescript` 标志以获取 TypeScript 源代码。例如，以下命令将在 `src/theme/Footer` 目录生成 `index.tsx` 和 `styles.module.css`。

```bash npm2yarn
npm run swizzle @docusaurus/theme-classic Footer -- --typescript
```

所有官方 Docusaurus 主题均支持 TypeScript 主题组件，包括 [`经典主题`](./api/themes/theme-classic.mdx)、[`实时代码块主题`](./api/themes/theme-live-codeblock.mdx) 和 [`Algolia 搜索主题`](./api/themes/theme-search-algolia.mdx)。如果您是希望添加 TypeScript 支持的 Docusaurus 主题包作者，请参阅[生命周期 API 文档](./api/plugin-methods/extend-infrastructure.mdx#getTypeScriptThemePath)。