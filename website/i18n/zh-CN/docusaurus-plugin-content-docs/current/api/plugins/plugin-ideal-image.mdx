---
sidebar_position: 8
slug: /api/plugins/@docusaurus/plugin-ideal-image
---

# ğŸ“¦ plugin-ideal-image

import APITable from '@site/src/components/APITable';

Docusaurus æ’ä»¶ï¼Œç”¨äºç”Ÿæˆè¿‘ä¹ç†æƒ³çš„å›¾åƒï¼ˆå“åº”å¼ã€æ‡’åŠ è½½å’Œä½è´¨é‡å ä½å›¾ï¼‰ã€‚

:::info

é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥æ’ä»¶åœ¨å¼€å‘ç¯å¢ƒä¸­å¤„äº**éæ´»åŠ¨çŠ¶æ€**ï¼Œä»¥ä¾¿æ‚¨å§‹ç»ˆå¯ä»¥æŸ¥çœ‹å…¨å°ºå¯¸å›¾åƒã€‚å¦‚éœ€è°ƒè¯•ç†æƒ³å›¾åƒè¡Œä¸ºï¼Œå¯å°† [`disableInDev`](#disableInDev) é€‰é¡¹è®¾ä¸º `false`ã€‚

:::

## å®‰è£… {#installation}

```bash npm2yarn
npm install --save @docusaurus/plugin-ideal-image
```

## ä½¿ç”¨è¯´æ˜ {#usage}

æœ¬æ’ä»¶ä»…æ”¯æŒ PNG å’Œ JPG æ ¼å¼ã€‚

```jsx
import Image from '@theme/IdealImage';
import thumbnail from './path/to/img.png';

// your React code
<Image img={thumbnail} />

// or
<Image img={require('./path/to/img.png')} />
```

:::warning

æœ¬æ’ä»¶ä¼šæ³¨å†Œä¸€ä¸ª [Webpack loader](https://webpack.js.org/loaders/)ï¼Œæ”¹å˜å¯¼å…¥/require å›¾åƒçš„ç±»å‹ï¼š

- ä¹‹å‰ï¼š`string`
- ä¹‹åï¼š`{preSrc: string, src: import("@theme/IdealImage").SrcImage}`

:::

:::warning[é’ˆå¯¹ pnpm ç”¨æˆ·]

ä» [pnpm 10](https://github.com/pnpm/pnpm/releases/tag/v10.0.0) å¼€å§‹ï¼Œè¿è¡Œ `pnpm install` é»˜è®¤ä¸ä¼šæ‰§è¡Œä¾èµ–é¡¹çš„å®‰è£…è„šæœ¬ã€‚æ‚¨éœ€è¦é¢å¤–çš„ pnpm é…ç½®ï¼ˆ[é—®é¢˜](https://github.com/lovell/sharp/issues/4343)ï¼‰æ‰èƒ½æ­£ç¡®å®‰è£…æˆ‘ä»¬ç”¨äºå›¾åƒç¼©æ”¾çš„ `sharp` ä¾èµ–é¡¹ï¼Œä¾‹å¦‚ï¼š

```json title="package.json"
{
  "pnpm": {
    "onlyBuiltDependencies": ["fsevents"]
  }
}
```

:::

## é…ç½®é€‰é¡¹ {#configuration}

å¯æ¥å—å­—æ®µï¼š

<APITable>

| Option | Type | Default | Description |
| --- | --- | --- | --- |
| `name` | `string` | `ideal-img/[name].[hash:hex:7].[width].[ext]` | Filename template for output files. |
| `sizes` | `number[]` | _original size_ | Specify all widths you want to use. If a specified size exceeds the original image's width, the latter will be used (i.e. images won't be scaled up). |
| `size` | `number` | _original size_ | Specify one width you want to use; if the specified size exceeds the original image's width, the latter will be used (i.e. images won't be scaled up) |
| `min` | `number` |  | As an alternative to manually specifying `sizes`, you can specify `min`, `max` and `steps`, and the sizes will be generated for you. |
| `max` | `number` |  | See `min` above |
| `steps` | `number` | `4` | Configure the number of images generated between `min` and `max` (inclusive) |
| `quality` | `number` | `85` | JPEG compression quality |
| `disableInDev` | `boolean` | `true` | You can test ideal image behavior in dev mode by setting this to `false`. **Tip**: use [network throttling](https://www.browserstack.com/guide/how-to-perform-network-throttling-in-chrome) in your browser to simulate slow networks. |

</APITable>

### é…ç½®ç¤ºä¾‹ {#ex-config}

ä»¥ä¸‹æ˜¯ä¸€ä¸ªé…ç½®ç¤ºä¾‹ï¼š

```js title="docusaurus.config.js"
export default {
  plugins: [
    [
      '@docusaurus/plugin-ideal-image',
      // highlight-start
      {
        quality: 70,
        max: 1030, // max resized image's size.
        min: 640, // min resized image's size. if original is lower, use that size.
        steps: 2, // the max number of images generated between min and max (inclusive)
        disableInDev: false,
      },
      // highlight-end
    ],
  ],
};
```