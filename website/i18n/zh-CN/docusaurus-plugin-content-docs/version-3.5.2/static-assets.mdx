---
description: Static assets are the non-code files that are directly copied to the build output. Learn about how they are handled and what the best practices of using static assets are.
---

# 静态资源

静态资源是指无需编译直接复制到构建输出的非代码文件，包括图片、样式表、网站图标、字体等。

默认建议将这些资源存放在`static`文件夹中。**该目录下的所有文件**都将被原样复制到生成的`build`文件夹根目录，并保持目录层级结构。例如若添加名为`sun.jpg`的文件至static文件夹，最终会复制为`build/sun.jpg`。

这意味着：

- 当站点`baseUrl: '/'`时，图片`/static/img/docusaurus.png`将通过`/img/docusaurus.png`路径提供服务
- 当站点`baseUrl: '/subpath/'`时，该图片将通过`/subpath/img/docusaurus.png`路径提供服务

可在`docusaurus.config.js`中自定义静态目录来源。例如添加`public`作为额外路径：

```js title="docusaurus.config.js"
export default {
  title: 'My site',
  staticDirectories: ['public', 'static'],
  // ...
};
```

现在`public`和`static`目录下的所有文件都将被复制到构建输出中。

## 引用静态资源 {#referencing-your-static-asset}

### 在JSX中 {#in-jsx}

在JSX中可通过绝对URL引用`static`文件夹资源，但这种方式不理想——修改站点`baseUrl`会导致链接失效。例如`<img src="/img/docusaurus.png" />`在`https://example.com/test`下部署时，浏览器会尝试从URL根路径解析为`https://example.com/img/docusaurus.png`，而实际资源位于`https://example.com/test/img/docusaurus.png`。

推荐使用`import()`或`require()`加载静态资源，亦可使用`useBaseUrl`工具函数：二者都会自动为路径添加`baseUrl`前缀。

示例：

```jsx title="MyComponent.js"
import DocusaurusImageUrl from '@site/static/img/docusaurus.png';

<img src={DocusaurusImageUrl} />;
```

```jsx title="MyComponent.js"
<img src={require('@site/static/img/docusaurus.png').default} />
```

```jsx title="MyComponent.js"
import useBaseUrl from '@docusaurus/useBaseUrl';

<img src={useBaseUrl('/img/docusaurus.png')} />;
```

SVG文件也可被导入：它们会被转换为React组件。

```jsx title="MyComponent.js"
import DocusaurusLogoWithKeytar from '@site/static/img/docusaurus_keytar.svg';

<DocusaurusLogoWithKeytar title="Docusaurus Logo" className="logo" />;
```

### 在Markdown中 {#in-markdown}

在Markdown语法中编写链接或图片时，可使用绝对路径——因为Docusaurus在解析Markdown时会将其作为`require`调用而非URL处理。详见[Markdown静态资源](./guides/markdown-features/markdown-features-assets.mdx)。

```md
You write a link like this: [Download this document](/files/note.docx)

Docusaurus changes that to: <a href={require('static/files/note.docx')}>Download this document</a>
```

:::warning[使用Markdown语法]

Docusaurus仅会解析Markdown语法中的链接。若使用JSX标签`<a>`/`<img>`引用资源，将不会进行特殊处理。

:::

### 在CSS中 {#in-css}

CSS中常用`url()`函数引用字体、图片等资源。引用静态资源时使用绝对路径：

```css
@font-face {
  font-family: 'Caroline';
  src: url('/font/Caroline.otf');
}
```

打包器将加载`static/font/Caroline.otf`资源。

:::warning[核心原则]

重要原则：**永远不要硬编码base URL！** 基础URL属于实现细节，应保证可灵活修改。所有路径（即使看似URL片段）本质上都是文件路径。

若更习惯URL片段思维模型，可遵循以下经验法则：
- 编写JSX时假设base URL为`/test/`，避免使用`src="/img/thumbnail.png"`这种绝对路径，改用`require`引入资源
- 编写Markdown或CSS时假设base URL为`/`，始终使用不含base URL的绝对路径

:::

## 注意事项 {#caveats}

请注意以下几点：

- 默认情况下，`static` 文件夹中的文件不会经过后处理、哈希化或压缩。
  - 但如上文所示，我们通常能将其转换为 `require` 调用以便处理。这有利于实现激进缓存策略并提升用户体验。
- 通过硬编码绝对路径引用的缺失文件在编译时不会被检测到，将导致404错误。
- GitHub Pages 默认会使用 [Jekyll](https://jekyllrb.com/) 处理发布文件。由于 Jekyll 会忽略以下划线 `_` 开头的文件，若使用 GitHub Pages 托管，建议在 `static` 目录中添加名为 `.nojekyll` 的空文件来禁用 Jekyll。