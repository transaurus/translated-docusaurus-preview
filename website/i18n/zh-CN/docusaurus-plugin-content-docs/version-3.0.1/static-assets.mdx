---
description: Static assets are the non-code files that are directly copied to the build output. Learn about how they are handled and what the best practices of using static assets are.
---

# 静态资源

静态资源是指直接复制到构建输出目录的非代码文件，包括图片、样式表、网站图标、字体等。

默认建议将这些资源放在 `static` 文件夹中。**该目录下的所有文件** 都将被复制到生成的 `build` 文件夹根目录，并保持目录层级结构。例如，若添加名为 `sun.jpg` 的文件到 static 文件夹，它会被复制为 `build/sun.jpg`。

这意味着：

- 当站点配置为 `baseUrl: '/'` 时，图片 `/static/img/docusaurus.png` 将通过 `/img/docusaurus.png` 路径提供服务。
- 当站点配置为 `baseUrl: '/subpath/'` 时，图片 `/static/img/docusaurus.png` 将通过 `/subpath/img/docusaurus.png` 路径提供服务。

您可以在 `docusaurus.config.js` 中自定义静态资源目录来源。例如，我们可以添加 `public` 作为另一个可选路径：

```js title="docusaurus.config.js"
export default {
  title: 'My site',
  staticDirectories: ['public', 'static'],
  // ...
};
```

现在，`public` 和 `static` 目录下的所有文件都将被复制到构建输出目录。

## 引用静态资源 {#referencing-your-static-asset}

### 在 JSX 中 {#in-jsx}

在 JSX 中，您可以使用绝对路径引用 `static` 文件夹中的资源，但这种方式并不理想——因为更改站点 `baseUrl` 会导致**链接失效**。例如对于部署在 `https://example.com/test` 的图片 `<img src="/img/docusaurus.png" />`，浏览器会尝试从 URL 根路径解析为 `https://example.com/img/docusaurus.png`，而实际路径应为 `https://example.com/test/img/docusaurus.png`，这将导致加载失败。

推荐使用 `import()` 或 `require()` 引入静态资源，或使用 `useBaseUrl` 工具函数：这两种方式都会自动为路径添加 `baseUrl` 前缀。

示例：

```jsx title="MyComponent.js"
import DocusaurusImageUrl from '@site/static/img/docusaurus.png';

<img src={DocusaurusImageUrl} />;
```

```jsx title="MyComponent.js"
<img src={require('@site/static/img/docusaurus.png').default} />
```

```jsx title="MyComponent.js"
import useBaseUrl from '@docusaurus/useBaseUrl';

<img src={useBaseUrl('/img/docusaurus.png')} />;
```

您也可以导入 SVG 文件：它们会被转换为 React 组件。

```jsx title="MyComponent.js"
import DocusaurusLogoWithKeytar from '@site/static/img/docusaurus_keytar.svg';

<DocusaurusLogoWithKeytar title="Docusaurus Logo" className="logo" />;
```

### 在 Markdown 中 {#in-markdown}

在 Markdown 中，**使用 Markdown 语法** 编写链接或图片时可采用绝对路径，因为 Docusaurus 在解析 Markdown 时会将其作为 `require` 调用处理而非 URL。详见 [Markdown 静态资源](./guides/markdown-features/markdown-features-assets.mdx)。

```md
You write a link like this: [Download this document](/files/note.docx)

Docusaurus changes that to: <a href={require('static/files/note.docx')}>Download this document</a>
```

:::warning[请使用 Markdown 语法]

Docusaurus 仅会解析 Markdown 语法中的链接。若使用 JSX 标签 `<a>` / `<img>` 引用资源，将不会进行任何处理。

:::

### 在 CSS 中 {#in-css}

在 CSS 中，常用 `url()` 函数引用字体和图片等资源。引用静态资源时请使用绝对路径：

```css
@font-face {
  font-family: 'Caroline';
  src: url('/font/Caroline.otf');
}
```

构建工具将加载 `static/font/Caroline.otf` 资源。

:::warning[重要原则]

核心原则：**永远不要硬编码基础路径！** 基础路径属于实现细节，应保持可灵活变更。所有路径（即使它们看起来像 URL 片段）本质上都是文件路径。

若更习惯 URL 片段思维模型，可遵循以下经验法则：

- 编写 JSX 时假设基础路径为 `/test/`，避免使用 `src="/img/thumbnail.png"` 这类绝对路径，改用 `require` 引入资源。
- 编写 Markdown 或 CSS 时假设基础路径为 `/`，始终使用不含基础路径的绝对路径。

:::

## 注意事项 {#caveats}

请注意以下几点：

- 默认情况下，`static` 文件夹中的文件不会经过后处理、哈希化或压缩。
  - 但如上文所示，我们通常能将其转换为 `require` 调用以便处理。这有利于实现激进缓存和提升用户体验。
- 通过硬编码绝对路径引用的缺失文件在编译时不会被检测到，将导致404错误。
- 默认情况下，GitHub Pages 会使用 [Jekyll](https://jekyllrb.com/) 处理发布文件。由于 Jekyll 会忽略以下划线 `_` 开头的文件，若使用 GitHub Pages 托管，建议在 `static` 目录中添加名为 `.nojekyll` 的空文件来禁用 Jekyll。